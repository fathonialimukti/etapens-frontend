import{a as c,p as g,c as A}from"./endpoint.aea53914.js";import{_ as C,d as i,f as e,a as r,c as d,aj as f,w as u,F as v,e as n,o,r as D,t as m,b as _}from"./index.23a29a87.js";const k={data(){return{data:void 0,itemPerPage:25,totalPage:null,page:null,title:null,role:"Student",isActive:"All",loading:!1,error:null}},beforeMount(){this.getData()},methods:{async getData(){this.loading=!0;const a={};this.itemPerPage&&(a.itemPerPage=this.itemPerPage),this.name&&(a.name=this.name),this.isActive&&(a.isActive=this.isActive),c.get(g+"admin/list-backend",{params:a}).then(t=>{this.data=t.data.data,this.totalPage=t.data.totalPage}),this.loading=!1},async deploy(a){this.loading=!0,this.error=null,await c.post(A+"backend",{username:a.student.user.username,sourceCode:a.sourceCode}).then(t=>{console.log(t),this.activate(a.id)}).catch(t=>{this.error=t,this.loading=!1})},async activate(a){this.loading=!0,await c.patch(g+"admin/activate-backend",{id:a}).then(()=>this.getData()).catch(t=>{this.error=t}),this.loading=!1}},watch:{isActive(){this.getData()},itemPerPage(){this.getData()}}},S={class:"grid md:grid-cols-9 gap-2"},w=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},[e("h1",{class:"font-bold text-lg"},"Student")]),e("th",{class:"text-left"},[e("h1",{class:"font-bold text-lg"},"Description")]),e("th",{class:"text-left"},[e("h1",{class:"font-bold text-lg"},"Port")]),e("th",{class:"text-left"},[e("h1",{class:"font-bold text-lg"},"Repository")]),e("th",{class:"text-left"},[e("h1",{class:"font-bold text-lg"},"Status")])])],-1),B=["href"];function N(a,t,U,j,s,h){const p=n("v-select"),P=n("v-text-field"),x=n("v-progress-linear"),y=n("v-btn"),V=n("v-chip"),b=n("v-table");return o(),i(v,null,[e("div",S,[r(p,{modelValue:s.itemPerPage,"onUpdate:modelValue":t[0]||(t[0]=l=>s.itemPerPage=l),label:"Item per Page",class:"md:col-span-2",items:[12,25,50],"prepend-inner-icon":"mdi-format-list-numbered"},null,8,["modelValue"]),r(p,{modelValue:s.isActive,"onUpdate:modelValue":t[1]||(t[1]=l=>s.isActive=l),label:"Status",class:"md:col-span-2",items:["All","Active","Inactive"],"prepend-inner-icon":"mdi-list-status"},null,8,["modelValue"]),r(P,{modelValue:a.name,"onUpdate:modelValue":t[2]||(t[2]=l=>a.name=l),label:"Title",class:"md:col-span-5",onChange:h.getData,"prepend-inner-icon":"mdi-book-search-outline"},null,8,["modelValue","onChange"])]),s.loading?(o(),d(x,{key:0,indeterminate:"",color:"green"})):f("",!0),r(b,{"fixed-header":""},{default:u(()=>[w,e("tbody",null,[(o(!0),i(v,null,D(s.data,l=>(o(),i("tr",{key:l.id},[e("td",null,m(l.student.name),1),e("td",null,m(l.description),1),e("td",null,[l.sourceCode?(o(),i("a",{key:0,href:l.sourceCode,target:"_blank",rel:"noopener noreferrer"},m(l.sourceCode),9,B)):f("",!0)]),e("td",null,[l.isActive?(o(),d(V,{key:1,color:"green","text-color":"white"},{default:u(()=>[_(" Active ")]),_:1})):(o(),d(y,{key:0,onClick:F=>h.deploy(l),color:"error",size:"small",rounded:"pill"},{default:u(()=>[_(" Deploy ")]),_:2},1032,["onClick"]))])]))),128))])]),_:1})],64)}const q=C(k,[["render",N]]);export{q as default};
