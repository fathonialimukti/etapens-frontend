import{a,p as n}from"./endpoint.aea53914.js";import{_ as w,u as x,c as m,w as V,e as i,o as h,a as o,aj as j,f as g,t as y,b as F}from"./index.23a29a87.js";import{S as k}from"./Storage.3afc3dc2.js";const c=x(),R={data(){return{project:{title:null,studentId:c.user.studentAccount.id,description:null,lecturers:[],video:null,type:null,sourceCode:null,url:null,tech:[],methods:[],researchFields:[],documents:[],images:[]},search:{lecturers:null,tech:null,researchFields:null,methods:null},list:{lecturers:[],tech:[],researchFields:[],method:[]},status:null,error:null,checkbox:!1}},methods:{async validate(){const{valid:s}=await this.$refs.form.validate();if(s)this.submit();else return},async submit(){var s=this.project;const l=s.documents,b=s.images;s.video=s.video.split("/").pop(),s.documents=[],s.images=[];const p="https://etapens-storage140101-dev.s3.ap-southeast-1.amazonaws.com/public/";if(await a({method:"post",url:n+"student/project",data:s,headers:{"Content-Type":"application/json"}}).then(e=>{this.status=e.message,s=e.data}).catch(e=>{this.status="Error:"+e}),!this.error){for(const e of b)await k.put(`${c.user.username}/images/${e.name}`,e,{acl:"public-read",contentType:e.type,progressCallback:r=>{this.status=`Uploaded: ${r.loaded}/${r.total}`},errorCallback:r=>{this.error="Unexpected error while uploading"+r},completeCallback:r=>{this.status=`Successfully uploaded ${r.key}`}}),s.images.push(p+`${c.user.username}/images/${e.name.replace(/ /g,"+")}`);if(!this.error){for(const e of l)await k.put(`${c.user.username}/documents/${e.name}`,e,{acl:"public-read",contentType:e.type,progressCallback:r=>{this.status=`Uploaded: ${r.loaded}/${r.total}`},errorCallback:r=>{this.error="Unexpected error while uploading"+r},completeCallback:r=>{this.status=`Successfully uploaded ${r.key}`}}),s.documents.push({name:e.name,url:p+`${c.user.username}/documents/${e.name.replace(/ /g,"+")}`});this.error||(await a({method:"patch",url:n+"student/project",data:s,headers:{"Content-Type":"application/json"}}).then(e=>{this.status=e.message}).catch(()=>{this.status="Error"}),!this.error&&this.$router.push({name:"Student Dashboard"}))}}},async findLecturer(){const s=this.search.lecturers;await a.get(n+"find-lecturer",{params:{name:s}}).then(l=>{this.list.lecturers=l.data}).catch(l=>{this.list.lecturers[0]=l.error})},async findTech(){const s=this.search.tech;await a.get(n+"find-tech-list",{params:{name:s}}).then(l=>{this.list.tech=l.data}).catch(l=>{this.list.tech[0]=l.error})},async findResearchFields(){const s=this.search.researchFields;await a.get(n+"find-research-field",{params:{name:s}}).then(l=>{this.list.researchFields=l.data}).catch(l=>{this.list.researchFields[0]=l.error})},async findMethods(){const s=this.search.methods;await a.get(n+"find-research-method",{params:{name:s}}).then(l=>{this.list.methods=l.data}).catch(l=>{this.list.methods[0]=l.error})}}};function T(s,l,b,p,e,r){const d=i("v-text-field"),v=i("v-textarea"),u=i("v-autocomplete"),f=i("v-file-input"),U=i("v-checkbox"),C=i("v-btn"),S=i("v-form");return h(),m(S,{ref:"form",modelValue:s.isValid,"onUpdate:modelValue":l[17]||(l[17]=t=>s.isValid=t),"lazy-validation":""},{default:V(()=>[o(d,{modelValue:e.project.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.project.title=t),label:"Judul Tugas Akhir",rules:[t=>!!t||" is Required"],clearable:""},null,8,["modelValue","rules"]),o(v,{modelValue:e.project.description,"onUpdate:modelValue":l[1]||(l[1]=t=>e.project.description=t),label:"Deskripsi atau Abstract",rules:[t=>!!t||"Description is Required"],clearable:""},null,8,["modelValue","rules"]),o(u,{label:"Dosen pembimbing",modelValue:e.project.lecturers,"onUpdate:modelValue":l[2]||(l[2]=t=>e.project.lecturers=t),search:e.search.lecturers,"onUpdate:search":l[3]||(l[3]=t=>e.search.lecturers=t),onInput:r.findLecturer,items:e.list.lecturers,"item-title":"name",placeholder:"Start typing then enter search","prepend-icon":"mdi-human-male-board-poll",chips:"","closable-chips":"","return-object":"",multiple:"","hide-no-data":"","hide-selected":""},null,8,["modelValue","search","onInput","items"]),o(d,{modelValue:e.project.video,"onUpdate:modelValue":l[4]||(l[4]=t=>e.project.video=t),label:"Video demo",rules:[t=>!!t||"Abstract is Required"],"prepend-icon":"mdi-youtube",clearable:""},null,8,["modelValue","rules"]),o(u,{label:"Tipe Aplikasi",modelValue:e.project.type,"onUpdate:modelValue":l[5]||(l[5]=t=>e.project.type=t),items:["Generals","WebStatic","SelfHostedWeb","NodeJs"],rules:[t=>!!t||"App type is Required"],"prepend-icon":"mdi-format-list-bulleted-type"},null,8,["modelValue","rules"]),e.project.type=="NodeJs"||e.project.type=="WebStatic"?(h(),m(d,{key:0,modelValue:e.project.sourceCode,"onUpdate:modelValue":l[6]||(l[6]=t=>e.project.sourceCode=t),label:"Source Code",rules:[t=>!!t||"Source Code is Required"],"prepend-icon":"mdi-git",clearable:""},null,8,["modelValue","rules"])):j("",!0),e.project.type=="SelfHostedWeb"?(h(),m(d,{key:1,modelValue:e.project.url,"onUpdate:modelValue":l[7]||(l[7]=t=>e.project.url=t),label:"Url Aplikasi",rules:[t=>!!t||"Url is Required"],"prepend-icon":"mdi-web",clearable:""},null,8,["modelValue","rules"])):j("",!0),o(u,{label:"Teknologi yang digunakan",modelValue:e.project.tech,"onUpdate:modelValue":l[8]||(l[8]=t=>e.project.tech=t),search:e.search.tech,"onUpdate:search":l[9]||(l[9]=t=>e.search.tech=t),onInput:r.findTech,items:e.list.tech,"item-title":"name",rules:[t=>!!t||"Tech is Required"],placeholder:"Start typing then enter search","prepend-icon":"mdi-tools",multiple:"",chips:"","closable-chips":"","return-object":"","hide-no-data":"","hide-selected":""},null,8,["modelValue","search","onInput","items","rules"]),o(u,{label:"Metode yang digunakan",modelValue:e.project.methods,"onUpdate:modelValue":l[10]||(l[10]=t=>e.project.methods=t),search:e.search.methods,"onUpdate:search":l[11]||(l[11]=t=>e.search.methods=t),onInput:r.findMethods,items:e.list.methods,"item-title":"name","item-value":"name",rules:[t=>!!t||"Method is Required"],placeholder:"Start typing then enter search","prepend-icon":"mdi-tools",multiple:"",chips:"","closable-chips":"","return-object":"","hide-no-data":"","hide-selected":""},null,8,["modelValue","search","onInput","items","rules"]),o(u,{label:"jenis Penelitian",modelValue:e.project.researchFields,"onUpdate:modelValue":l[12]||(l[12]=t=>e.project.researchFields=t),search:e.search.researchFields,"onUpdate:search":l[13]||(l[13]=t=>e.search.researchFields=t),onInput:r.findResearchFields,items:e.list.researchFields,"item-title":"name",rules:[t=>!!t||"Reseach Fieldl is Required"],placeholder:"Start typing then enter search","prepend-icon":"mdi-focus-field",multiple:"",chips:"","closable-chips":"","return-object":"","hide-no-data":"","hide-selected":""},null,8,["modelValue","search","onInput","items","rules"]),o(f,{type:"file",modelValue:e.project.images,"onUpdate:modelValue":l[14]||(l[14]=t=>e.project.images=t),chips:"",multiple:"",label:"Gambar hasil TA",rules:[t=>!!t||"Images is Required"],"prepend-icon":"mdi-image-check-outline"},null,8,["modelValue","rules"]),o(f,{type:"file",modelValue:e.project.documents,"onUpdate:modelValue":l[15]||(l[15]=t=>e.project.documents=t),chips:"",multiple:"",label:"Dokumen TA",rules:[t=>!!t||"Documents is Required"],"prepend-icon":"mdi-file-document"},null,8,["modelValue","rules"]),o(U,{modelValue:e.checkbox,"onUpdate:modelValue":l[16]||(l[16]=t=>e.checkbox=t),rules:[t=>!!t||"You must agree to continue!"],label:"Apakah data sudah benar?"},null,8,["modelValue","rules"]),g("p",null,y(e.error),1),g("p",null,y(e.status),1),o(C,{color:"success",class:"mr-4",onClick:r.validate},{default:V(()=>[F(" Submit ")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])}const D=w(R,[["render",T]]);export{D as default};
