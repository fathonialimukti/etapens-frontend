import{a as _,p as f,c as C}from"./endpoint.aea53914.js";import{_ as V,d,f as t,a as n,c as u,aj as w,w as r,F as v,e as i,o as s,r as D,b as c,t as m}from"./index.23a29a87.js";const S={data(){return{data:void 0,itemPerPage:25,totalPage:null,page:null,title:null,role:"Student",isActive:"All",loading:null,error:null}},beforeMount(){this.getData()},methods:{async getData(){this.loading=!0;const a={};this.itemPerPage&&(a.itemPerPage=this.itemPerPage),this.title&&(a.title=this.title),this.isActive&&(a.isActive=this.isActive),await _.get(f+"admin/list-project",{params:a}).then(l=>{this.data=l.data.data,this.totalPage=l.data.totalPage}),this.loading=!1},async deploy(a){this.loading=!0,this.error=null,await _.post(C+"project",{username:a.student.user.username,sourceCode:a.sourceCode}).then(l=>{console.log(l),this.activate(a.id)}).catch(l=>{this.error=l,this.loading=!1})},async activate(a){this.loading=!0,await _.patch(f+"admin/activate-project",{id:a}).then(()=>this.getData()).catch(l=>{this.error=l}),this.loading=!1}},watch:{isActive(){this.getData()},itemPerPage(){this.getData()}}},N={class:"grid md:grid-cols-9 gap-2"},B=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},[t("h1",{class:"font-bold text-lg"},"Title")]),t("th",{class:"text-left"},[t("h1",{class:"font-bold text-lg"},"Student Name")]),t("th",{class:"text-left"},[t("h1",{class:"font-bold text-lg"},"Type / Repository")]),t("th",{class:"text-left"},[t("h1",{class:"font-bold text-lg"},"Status")])])],-1),T=["href"],z={key:1};function F(a,l,U,I,o,h){const p=i("v-select"),x=i("v-text-field"),y=i("v-progress-linear"),b=i("router-link"),g=i("v-btn"),k=i("v-chip"),P=i("v-table");return s(),d(v,null,[t("div",N,[n(p,{modelValue:o.itemPerPage,"onUpdate:modelValue":l[0]||(l[0]=e=>o.itemPerPage=e),label:"Item per Page",class:"md:col-span-2",items:[12,25,50],"prepend-inner-icon":"mdi-format-list-numbered"},null,8,["modelValue"]),n(p,{modelValue:o.isActive,"onUpdate:modelValue":l[1]||(l[1]=e=>o.isActive=e),label:"Status",class:"md:col-span-2",items:["All","Active","Inactive"],"prepend-inner-icon":"mdi-list-status"},null,8,["modelValue"]),n(x,{modelValue:o.title,"onUpdate:modelValue":l[2]||(l[2]=e=>o.title=e),label:"Title",class:"md:col-span-5",onChange:h.getData,"prepend-inner-icon":"mdi-book-search-outline"},null,8,["modelValue","onChange"])]),o.loading?(s(),u(y,{key:0,indeterminate:"",color:"green"})):w("",!0),n(P,{"fixed-header":""},{default:r(()=>[B,t("tbody",null,[(s(!0),d(v,null,D(o.data,e=>(s(),d("tr",{key:e.id},[t("td",null,[n(b,{to:{title:"Project",params:{title:e.title}},class:"flex flex-wrap font-bold",target:"_blank"},{default:r(()=>[c(m(e.title),1)]),_:2},1032,["to"])]),t("td",null,m(e.student.name),1),t("td",null,[e.sourceCode?(s(),d("a",{key:0,href:e.sourceCode,target:"_blank"},[n(g,{color:"warning",size:"x-small"},{default:r(()=>[c(m(e.type),1)]),_:2},1024)],8,T)):(s(),d("p",z,m(e.type),1))]),t("td",null,[e.type=="NodeJs"&&!e.isActive?(s(),u(g,{key:0,onClick:A=>h.deploy(e),color:"error",size:"small",rounded:"pill"},{default:r(()=>[c(" Deploy ")]),_:2},1032,["onClick"])):e.isActive?(s(),u(k,{key:1,color:"green","text-color":"white"},{default:r(()=>[c(" Active ")]),_:1})):(s(),u(g,{key:2,onClick:A=>h.activate(e.id),color:"error",size:"small",rounded:"pill"},{default:r(()=>[c(" Activate ")]),_:2},1032,["onClick"]))])]))),128))])]),_:1})],64)}const J=V(S,[["render",F]]);export{J as default};
