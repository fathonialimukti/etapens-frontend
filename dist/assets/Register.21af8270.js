import{_ as U,u as q,c as L,w as a,e as n,o as C,a as t,b as i}from"./index.23a29a87.js";import{a as v,p as g}from"./endpoint.aea53914.js";import{S as k}from"./Storage.3afc3dc2.js";const u=q(),V="https://etapens-storage140101-dev.s3.ap-southeast-1.amazonaws.com/public/",x={data(){return{tab:null,status:void 0,newStudent:{name:null,nrp:null,bio:null,image:[],userId:u.user.id},newLecturer:{name:null,nip:null,bio:null,image:[],userId:u.user.id}}},methods:{async submitMahasiswa(){const{valid:r}=await this.$refs.form.validate();!r||(await this.upload(this.newStudent.image[0]),this.newStudent.image=V+u.user.username+"/profile.png",await v({method:"post",url:g+"student/create",data:this.newStudent,headers:{"Content-Type":"application/json"}}).then(e=>{this.status=e.message}).catch(e=>{this.status=e.message}),this.$router.push({name:"Home"}))},async upload(r){await k.put(`${u.user.username}/profile.png`,r,{acl:"public-read",progressCallback:e=>{this.status=`Uploaded: ${e.loaded}/${e.total}`},errorCallback:e=>{this.status="Unexpected error while uploading"+e},completeCallback:e=>{this.status=`Successfully uploaded ${e.key}`}})},async submitDosen(){const{valid:r}=await this.$refs.form.validate();!r||(await this.upload(this.newLecturer.image[0]),this.newLecturer.image=V+u.user.username+"/profile.png",await v({method:"post",url:g+"lecturer/create",data:this.newLecturer,headers:{"Content-Type":"application/json"}}).then(e=>{this.status=e.message,this.$router.push({name:"Home"})}).catch(e=>{this.status=e.message}))}}};function N(r,e,B,D,o,d){const m=n("v-tab"),_=n("v-tabs"),s=n("v-text-field"),p=n("v-textarea"),c=n("v-file-input"),b=n("v-btn"),w=n("v-form"),f=n("v-window-item"),h=n("v-window"),y=n("v-card-text"),S=n("v-card");return C(),L(S,null,{default:a(()=>[t(_,{modelValue:o.tab,"onUpdate:modelValue":e[0]||(e[0]=l=>o.tab=l),"bg-color":"primary","fixed-tabs":""},{default:a(()=>[t(m,{value:"Mahasiswa"},{default:a(()=>[i("Mahasiswa")]),_:1}),t(m,{value:"Dosen"},{default:a(()=>[i("Dosen")]),_:1})]),_:1},8,["modelValue"]),t(y,null,{default:a(()=>[t(h,{modelValue:o.tab,"onUpdate:modelValue":e[11]||(e[11]=l=>o.tab=l)},{default:a(()=>[t(f,{value:"Mahasiswa"},{default:a(()=>[t(w,{ref:"form",modelValue:r.valid,"onUpdate:modelValue":e[5]||(e[5]=l=>r.valid=l),"lazy-validation":""},{default:a(()=>[t(s,{modelValue:o.newStudent.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.newStudent.name=l),rules:[l=>!!l||"Name is required"],label:"Nama",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(s,{modelValue:o.newStudent.nrp,"onUpdate:modelValue":e[2]||(e[2]=l=>o.newStudent.nrp=l),rules:[l=>!!l||"Nrp is required"],label:"NRP",type:"number",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(p,{modelValue:o.newStudent.bio,"onUpdate:modelValue":e[3]||(e[3]=l=>o.newStudent.bio=l),rules:[l=>!!l||"Bio is required"],label:"Bio",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(c,{modelValue:o.newStudent.image,"onUpdate:modelValue":e[4]||(e[4]=l=>o.newStudent.image=l),label:"Image",variant:"filled","prepend-icon":"mdi-camera",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue"]),t(b,{color:"success",class:"mr-4",onClick:d.submitMahasiswa},{default:a(()=>[i(" Submit ")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1}),t(f,{value:"Dosen"},{default:a(()=>[t(w,{ref:"form",modelValue:r.valid,"onUpdate:modelValue":e[10]||(e[10]=l=>r.valid=l),"lazy-validation":""},{default:a(()=>[t(s,{modelValue:o.newLecturer.name,"onUpdate:modelValue":e[6]||(e[6]=l=>o.newLecturer.name=l),rules:[l=>!!l||"Name is required"],label:"Nama",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(s,{modelValue:o.newLecturer.nip,"onUpdate:modelValue":e[7]||(e[7]=l=>o.newLecturer.nip=l),rules:[l=>!!l||"Nip is required"],label:"Nip",type:"number",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(p,{modelValue:o.newLecturer.bio,"onUpdate:modelValue":e[8]||(e[8]=l=>o.newLecturer.bio=l),rules:[l=>!!l||"Bio is required"],label:"Bio",required:"",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue","rules"]),t(c,{modelValue:o.newLecturer.image,"onUpdate:modelValue":e[9]||(e[9]=l=>o.newLecturer.image=l),label:"Image",variant:"filled","prepend-icon":"mdi-camera",color:"secondary","bg-color":"amber-lighten-4"},null,8,["modelValue"]),t(b,{color:"success",class:"mr-4",onClick:d.submitDosen},{default:a(()=>[i(" Submit ")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const z=U(x,[["render",N]]);export{z as default};
