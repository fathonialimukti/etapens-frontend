import{g as L,h as x,i as w,H as Z,j as nu,k as iu,l as Te,m as Ue,n as lc,p as at,q as F,s as au,v as su,x as o,y as fc,z as vc,A as hc,B as gc,C as mc,D as pc,E as yc,G as Sc,I as Cc,J as bc,K as Ec,L as ke,M as Ut,N as ie,O as wc,P as xc,Q as kc,R as Lc,S as Ac,T as Pc,U as Nc,V as Oc,W as Tc,X as Rc,Y as Bc,Z as Mc,$ as P,a0 as N,a1 as oe,a2 as ue,a3 as ou,a4 as Ic,a5 as zc,a6 as Dc,a7 as Ae,a8 as Uc,a9 as uu,aa as ye,ab as Kc,ac as Kt,ad as _c,ae as cu,af as qc}from"./index.23a29a87.js";var Fc=function(e,t){return Math.abs(jc(t).getTime()-e)>=3e5},jc=function(e){return new Date(Date.now()+e)};function Gc(e){return function(t,r){return function(n){return L(this,void 0,void 0,function(){var i,a,s,u,c,d,f,l,h;return x(this,function(g){switch(g.label){case 0:return Z.isInstance(n.request)?typeof e.signer!="function"?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return a=g.sent(),[3,3];case 2:a=e.signer,g.label=3;case 3:return i=a,u=t,c=[w({},n)],h={},[4,i.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:r.signing_region,signingService:r.signing_service})];case 4:return[4,u.apply(void 0,[w.apply(void 0,c.concat([(h.request=g.sent(),h)]))])];case 5:return s=g.sent(),d=s.response.headers,f=d&&(d.date||d.Date),f&&(l=Date.parse(f),Fc(l,e.systemClockOffset)&&(e.systemClockOffset=l-Date.now())),[2,s]}})})}}}var Hc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},$c=function(e){return{applyToStack:function(t){t.addRelativeTo(Gc(e),Hc)}}};function K(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var _t=function(e){return Array.isArray(e)?e:[e]},du=function(e){var t="#text";for(var r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=du(e[r]));return e},Vc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function xe(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),u=e.getUTCSeconds(),c=i<10?"0"+i:""+i,d=a<10?"0"+a:""+a,f=s<10?"0"+s:""+s,l=u<10?"0"+u:""+u;return Vc[n]+", "+c+" "+Xc[r]+" "+t+" "+d+":"+f+":"+l+" GMT"}var O="***SensitiveInformation***",vt={},Me={},qr;function Wc(){if(qr)return Me;qr=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.AwsCrc32=void 0;var e=nu,t=iu,r=lu(),n=function(){function i(){this.crc32=new r.Crc32}return i.prototype.update=function(a){(0,t.isEmptyData)(a)||this.crc32.update((0,t.convertToBuffer)(a))},i.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(a){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},i}();return Me.AwsCrc32=n,Me}var Fr;function lu(){return Fr||(Fr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=nu,r=iu;function n(c){return new i().update(c).digest()}e.crc32=n;var i=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(d){var f,l;try{for(var h=(0,t.__values)(d),g=h.next();!g.done;g=h.next()){var v=g.value;this.checksum=this.checksum>>>8^s[(this.checksum^v)&255]}}catch(p){f={error:p}}finally{try{g&&!g.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();e.Crc32=i;var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],s=(0,r.uint32ArrayFrom)(a),u=Wc();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return u.AwsCrc32}})}(vt)),vt}var fu=lu(),ht=function(){function e(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&jr(r),new e(r)},e.prototype.valueOf=function(){var t=this.bytes.slice(0),r=t[0]&128;return r&&jr(t),parseInt(Te(t),16)*(r?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function jr(e){for(var t=0;t<8;t++)e[t]^=255;for(var t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Jc=function(){function e(t,r){this.toUtf8=t,this.fromUtf8=r}return e.prototype.format=function(t){var r,n,i,a,s=[];try{for(var u=Ue(Object.keys(t)),c=u.next();!c.done;c=u.next()){var d=c.value,f=this.fromUtf8(d);s.push(Uint8Array.from([f.byteLength]),f,this.formatHeaderValue(t[d]))}}catch(S){r={error:S}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var l=new Uint8Array(s.reduce(function(S,y){return S+y.byteLength},0)),h=0;try{for(var g=Ue(s),v=g.next();!v.done;v=g.next()){var p=v.value;l.set(p,h),h+=p.byteLength}}catch(S){i={error:S}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return l},e.prototype.formatHeaderValue=function(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":var r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":var i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":var a=new DataView(new ArrayBuffer(3+t.value.byteLength));a.setUint8(0,6),a.setUint16(1,t.value.byteLength,!1);var s=new Uint8Array(a.buffer);return s.set(t.value,3),s;case"string":var u=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+u.byteLength));c.setUint8(0,7),c.setUint16(1,u.byteLength,!1);var d=new Uint8Array(c.buffer);return d.set(u,3),d;case"timestamp":var f=new Uint8Array(9);return f[0]=8,f.set(ht.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!ad.test(t.value))throw new Error("Invalid UUID received: "+t.value);var l=new Uint8Array(17);return l[0]=9,l.set(lc(t.value.replace(/\-/g,"")),1),l}},e.prototype.parse=function(t){for(var r={},n=0;n<t.byteLength;){var i=t.getUint8(n++),a=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,i));switch(n+=i,t.getUint8(n++)){case 0:r[a]={type:Hr,value:!0};break;case 1:r[a]={type:Hr,value:!1};break;case 2:r[a]={type:Zc,value:t.getInt8(n++)};break;case 3:r[a]={type:Qc,value:t.getInt16(n,!1)},n+=2;break;case 4:r[a]={type:Yc,value:t.getInt32(n,!1)},n+=4;break;case 5:r[a]={type:ed,value:new ht(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:var s=t.getUint16(n,!1);n+=2,r[a]={type:td,value:new Uint8Array(t.buffer,t.byteOffset+n,s)},n+=s;break;case 7:var u=t.getUint16(n,!1);n+=2,r[a]={type:rd,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,u))},n+=u;break;case 8:r[a]={type:nd,value:new Date(new ht(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[a]={type:id,value:Te(c.subarray(0,4))+"-"+Te(c.subarray(4,6))+"-"+Te(c.subarray(6,8))+"-"+Te(c.subarray(8,10))+"-"+Te(c.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return r},e}(),Gr;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Gr||(Gr={}));var Hr="boolean",Zc="byte",Qc="short",Yc="integer",ed="long",td="binary",rd="string",nd="timestamp",id="uuid",ad=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,vu=4,pe=vu*2,Ee=4,sd=pe+Ee*2;function od(e){var t=e.byteLength,r=e.byteOffset,n=e.buffer;if(t<sd)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(n,r,t),a=i.getUint32(0,!1);if(t!==a)throw new Error("Reported message length does not match received message length");var s=i.getUint32(vu,!1),u=i.getUint32(pe,!1),c=i.getUint32(t-Ee,!1),d=new fu.Crc32().update(new Uint8Array(n,r,pe));if(u!==d.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+d.digest()+")");if(d.update(new Uint8Array(n,r+pe,t-(pe+Ee))),c!==d.digest())throw new Error("The message checksum ("+d.digest()+") did not match the expected value of "+c);return{headers:new DataView(n,r+pe+Ee,s),body:new Uint8Array(n,r+pe+Ee+s,a-s-(pe+Ee+Ee))}}var hu=function(){function e(t,r){this.headerMarshaller=new Jc(t,r)}return e.prototype.marshall=function(t){var r=t.headers,n=t.body,i=this.headerMarshaller.format(r),a=i.byteLength+n.byteLength+16,s=new Uint8Array(a),u=new DataView(s.buffer,s.byteOffset,s.byteLength),c=new fu.Crc32;return u.setUint32(0,a,!1),u.setUint32(4,i.byteLength,!1),u.setUint32(8,c.update(s.subarray(0,8)).digest(),!1),s.set(i,12),s.set(n,i.byteLength+12),u.setUint32(a-4,c.update(s.subarray(8,a-4)).digest(),!1),s},e.prototype.unmarshall=function(t){var r=od(t),n=r.headers,i=r.body;return{headers:this.headerMarshaller.parse(n),body:i}},e.prototype.formatHeaders=function(t){return this.headerMarshaller.format(t)},e}();function ud(e){var t,r=0,n=0,i=null,a=null,s=function(c){if(typeof c!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+c);r=c,n=4,i=new Uint8Array(c);var d=new DataView(i.buffer);d.setUint32(0,c,!1)},u=function(){return at(this,arguments,function(){var c,d,f,l,h,g,v,p,S;return x(this,function(y){switch(y.label){case 0:c=e[Symbol.asyncIterator](),y.label=1;case 1:return[4,F(c.next())];case 2:return d=y.sent(),f=d.value,l=d.done,l?r?[3,4]:[4,F(void 0)]:[3,10];case 3:return[2,y.sent()];case 4:return r!==n?[3,7]:[4,F(i)];case 5:return[4,y.sent()];case 6:return y.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,F(void 0)];case 9:return[2,y.sent()];case 10:h=f.length,g=0,y.label=11;case 11:if(!(g<h))return[3,15];if(!i){if(v=h-g,a||(a=new Uint8Array(4)),p=Math.min(4-n,v),a.set(f.slice(g,g+p),n),n+=p,g+=p,n<4)return[3,15];s(new DataView(a.buffer).getUint32(0,!1)),a=null}return S=Math.min(r-n,h-g),i.set(f.slice(g,g+S),n),n+=S,g+=S,r&&r===n?[4,F(i)]:[3,14];case 12:return[4,y.sent()];case 13:y.sent(),i=null,r=0,n=0,y.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})};return t={},t[Symbol.asyncIterator]=u,t}function cd(e,t){var r;return r={},r[Symbol.asyncIterator]=function(){return at(this,arguments,function(){var n,i,a,s,u,c,d,f,l,h,g,v,p,S,y,b,E;return x(this,function(C){switch(C.label){case 0:C.trys.push([0,12,13,18]),n=au(e),C.label=1;case 1:return[4,F(n.next())];case 2:if(i=C.sent(),!!i.done)return[3,11];if(a=i.value,s=t.eventMarshaller.unmarshall(a),u=s.headers[":message-type"].value,u!=="error")return[3,3];throw c=new Error(s.headers[":error-message"].value||"UnknownError"),c.name=s.headers[":error-code"].value,c;case 3:return u!=="exception"?[3,5]:(d=s.headers[":exception-type"].value,f=(S={},S[d]=s,S),[4,F(t.deserializer(f))]);case 4:throw l=C.sent(),l.$unknown?(h=new Error(t.toUtf8(s.body)),h.name=d,h):l[d];case 5:return u!=="event"?[3,9]:(g=(y={},y[s.headers[":event-type"].value]=s,y),[4,F(t.deserializer(g))]);case 6:return v=C.sent(),v.$unknown?[3,10]:[4,F(v)];case 7:return[4,C.sent()];case 8:return C.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+s.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return p=C.sent(),b={error:p},[3,18];case 13:return C.trys.push([13,,16,17]),i&&!i.done&&(E=n.return)?[4,F(E.call(n))]:[3,15];case 14:C.sent(),C.label=15;case 15:return[3,17];case 16:if(b)throw b.error;return[7];case 17:return[7];case 18:return[2]}})})},r}var dd=function(){function e(t){var r=t.utf8Encoder,n=t.utf8Decoder;this.eventMarshaller=new hu(r,n),this.utfEncoder=r}return e.prototype.deserialize=function(t,r){var n=ud(t),i=cd(n,{eventMarshaller:this.eventMarshaller,deserializer:r,toUtf8:this.utfEncoder});return i},e.prototype.serialize=function(t,r){var n,i=this,a=function(){return at(this,arguments,function(){var s,u,c,d,f,l,h;return x(this,function(g){switch(g.label){case 0:g.trys.push([0,7,8,13]),s=au(t),g.label=1;case 1:return[4,F(s.next())];case 2:return u=g.sent(),!u.done?(c=u.value,d=i.eventMarshaller.marshall(r(c)),[4,F(d)]):[3,6];case 3:return[4,g.sent()];case 4:g.sent(),g.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return f=g.sent(),l={error:f},[3,13];case 8:return g.trys.push([8,,11,12]),u&&!u.done&&(h=s.return)?[4,F(h.call(s))]:[3,10];case 9:g.sent(),g.label=10;case 10:return[3,12];case 11:if(l)throw l.error;return[7];case 12:return[7];case 13:return[4,F(new Uint8Array(0))];case 14:return[4,g.sent()];case 15:return g.sent(),[2]}})})};return n={},n[Symbol.asyncIterator]=a,n},e}(),ld=function(e){var t;return t={},t[Symbol.asyncIterator]=function(){return at(this,arguments,function(){var r,n,i,a;return x(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,F(r.read())];case 3:return n=s.sent(),i=n.done,a=n.value,i?[4,F(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,F(a)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})},t},fd=function(e){var t=e[Symbol.asyncIterator]();return new ReadableStream({pull:function(r){return L(this,void 0,void 0,function(){var n,i,a;return x(this,function(s){switch(s.label){case 0:return[4,t.next()];case 1:return n=s.sent(),i=n.done,a=n.value,i?[2,r.close()]:(r.enqueue(a),[2])}})})}})},vd=function(){function e(t){var r=t.utf8Encoder,n=t.utf8Decoder;this.eventMarshaller=new hu(r,n),this.universalMarshaller=new dd({utf8Decoder:n,utf8Encoder:r})}return e.prototype.deserialize=function(t,r){var n=hd(t)?ld(t):t;return this.universalMarshaller.deserialize(n,r)},e.prototype.serialize=function(t,r){var n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?fd(n):n},e}(),hd=function(e){return typeof ReadableStream=="function"&&e instanceof ReadableStream},gd=function(e){return new vd(e)},md=function(e){return w(w({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})};const pd="@aws-sdk/client-s3",yd="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",Sd="3.6.1",Cd={clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},bd="./dist/cjs/index.js",Ed="./types/index.d.ts",wd="./dist/es/index.js",xd={"./runtimeConfig":"./runtimeConfig.browser"},kd=!1,Ld={"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-blob-browser":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/hash-stream-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/md5-js":"3.6.1","@aws-sdk/middleware-apply-body-checksum":"3.6.1","@aws-sdk/middleware-bucket-endpoint":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-expect-continue":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-location-constraint":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-sdk-s3":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-ssec":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","@aws-sdk/xml-builder":"3.6.1","fast-xml-parser":"^3.16.0",tslib:"^2.0.0"},Ad={"@aws-sdk/client-documentation-generator":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},Pd={node:">=10.0.0"},Nd={"<4.0":{"types/*":["types/ts3.4/*"]}},Od={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Td="Apache-2.0",Rd="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",Bd={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},Md={name:pd,description:yd,version:Sd,scripts:Cd,main:bd,types:Ed,module:wd,browser:xd,"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:kd,dependencies:Ld,devDependencies:Ad,engines:Pd,typesVersions:Nd,author:Od,license:Td,homepage:Rd,repository:Bd};function Id(e,t,r){return r===void 0&&(r=1024*1024),new Promise(function(n,i){var a=new FileReader;a.addEventListener("error",i),a.addEventListener("abort",i);var s=e.size,u=0;function c(){if(u>=s){n();return}a.readAsArrayBuffer(e.slice(u,Math.min(s,u+r)))}a.addEventListener("load",function(d){var f=d.target.result;t(new Uint8Array(f)),u+=f.byteLength,c()}),c()})}var zd=function(t,r){return L(this,void 0,void 0,function(){var n;return x(this,function(i){switch(i.label){case 0:return n=new t,[4,Id(r,function(a){n.update(a)})];case 1:return i.sent(),[2,n.digest()]}})})},ge=64,Dd=16,Ud=[1732584193,4023233417,2562383102,271733878],Kd=function(){function e(){this.state=Uint32Array.from(Ud),this.buffer=new DataView(new ArrayBuffer(ge)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(!_d(t)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=qd(t),n=0,i=r.byteLength;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),i--,this.bufferLength===ge&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return L(this,void 0,void 0,function(){var t,r,n,i,a,u,u,s,u;return x(this,function(c){if(!this.finished){if(t=this,r=t.buffer,n=t.bufferLength,i=t.bytesHashed,a=i*8,r.setUint8(this.bufferLength++,128),n%ge>=ge-8){for(u=this.bufferLength;u<ge;u++)r.setUint8(u,0);this.hashBuffer(),this.bufferLength=0}for(u=this.bufferLength;u<ge-8;u++)r.setUint8(u,0);r.setUint32(ge-8,a>>>0,!0),r.setUint32(ge-4,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}for(s=new DataView(new ArrayBuffer(Dd)),u=0;u<4;u++)s.setUint32(u*4,this.state[u],!0);return[2,new Uint8Array(s.buffer,s.byteOffset,s.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this,r=t.buffer,n=t.state,i=n[0],a=n[1],s=n[2],u=n[3];i=H(i,a,s,u,r.getUint32(0,!0),7,3614090360),u=H(u,i,a,s,r.getUint32(4,!0),12,3905402710),s=H(s,u,i,a,r.getUint32(8,!0),17,606105819),a=H(a,s,u,i,r.getUint32(12,!0),22,3250441966),i=H(i,a,s,u,r.getUint32(16,!0),7,4118548399),u=H(u,i,a,s,r.getUint32(20,!0),12,1200080426),s=H(s,u,i,a,r.getUint32(24,!0),17,2821735955),a=H(a,s,u,i,r.getUint32(28,!0),22,4249261313),i=H(i,a,s,u,r.getUint32(32,!0),7,1770035416),u=H(u,i,a,s,r.getUint32(36,!0),12,2336552879),s=H(s,u,i,a,r.getUint32(40,!0),17,4294925233),a=H(a,s,u,i,r.getUint32(44,!0),22,2304563134),i=H(i,a,s,u,r.getUint32(48,!0),7,1804603682),u=H(u,i,a,s,r.getUint32(52,!0),12,4254626195),s=H(s,u,i,a,r.getUint32(56,!0),17,2792965006),a=H(a,s,u,i,r.getUint32(60,!0),22,1236535329),i=$(i,a,s,u,r.getUint32(4,!0),5,4129170786),u=$(u,i,a,s,r.getUint32(24,!0),9,3225465664),s=$(s,u,i,a,r.getUint32(44,!0),14,643717713),a=$(a,s,u,i,r.getUint32(0,!0),20,3921069994),i=$(i,a,s,u,r.getUint32(20,!0),5,3593408605),u=$(u,i,a,s,r.getUint32(40,!0),9,38016083),s=$(s,u,i,a,r.getUint32(60,!0),14,3634488961),a=$(a,s,u,i,r.getUint32(16,!0),20,3889429448),i=$(i,a,s,u,r.getUint32(36,!0),5,568446438),u=$(u,i,a,s,r.getUint32(56,!0),9,3275163606),s=$(s,u,i,a,r.getUint32(12,!0),14,4107603335),a=$(a,s,u,i,r.getUint32(32,!0),20,1163531501),i=$(i,a,s,u,r.getUint32(52,!0),5,2850285829),u=$(u,i,a,s,r.getUint32(8,!0),9,4243563512),s=$(s,u,i,a,r.getUint32(28,!0),14,1735328473),a=$(a,s,u,i,r.getUint32(48,!0),20,2368359562),i=V(i,a,s,u,r.getUint32(20,!0),4,4294588738),u=V(u,i,a,s,r.getUint32(32,!0),11,2272392833),s=V(s,u,i,a,r.getUint32(44,!0),16,1839030562),a=V(a,s,u,i,r.getUint32(56,!0),23,4259657740),i=V(i,a,s,u,r.getUint32(4,!0),4,2763975236),u=V(u,i,a,s,r.getUint32(16,!0),11,1272893353),s=V(s,u,i,a,r.getUint32(28,!0),16,4139469664),a=V(a,s,u,i,r.getUint32(40,!0),23,3200236656),i=V(i,a,s,u,r.getUint32(52,!0),4,681279174),u=V(u,i,a,s,r.getUint32(0,!0),11,3936430074),s=V(s,u,i,a,r.getUint32(12,!0),16,3572445317),a=V(a,s,u,i,r.getUint32(24,!0),23,76029189),i=V(i,a,s,u,r.getUint32(36,!0),4,3654602809),u=V(u,i,a,s,r.getUint32(48,!0),11,3873151461),s=V(s,u,i,a,r.getUint32(60,!0),16,530742520),a=V(a,s,u,i,r.getUint32(8,!0),23,3299628645),i=X(i,a,s,u,r.getUint32(0,!0),6,4096336452),u=X(u,i,a,s,r.getUint32(28,!0),10,1126891415),s=X(s,u,i,a,r.getUint32(56,!0),15,2878612391),a=X(a,s,u,i,r.getUint32(20,!0),21,4237533241),i=X(i,a,s,u,r.getUint32(48,!0),6,1700485571),u=X(u,i,a,s,r.getUint32(12,!0),10,2399980690),s=X(s,u,i,a,r.getUint32(40,!0),15,4293915773),a=X(a,s,u,i,r.getUint32(4,!0),21,2240044497),i=X(i,a,s,u,r.getUint32(32,!0),6,1873313359),u=X(u,i,a,s,r.getUint32(60,!0),10,4264355552),s=X(s,u,i,a,r.getUint32(24,!0),15,2734768916),a=X(a,s,u,i,r.getUint32(52,!0),21,1309151649),i=X(i,a,s,u,r.getUint32(16,!0),6,4149444226),u=X(u,i,a,s,r.getUint32(44,!0),10,3174756917),s=X(s,u,i,a,r.getUint32(8,!0),15,718787259),a=X(a,s,u,i,r.getUint32(36,!0),21,3951481745),n[0]=i+n[0]&4294967295,n[1]=a+n[1]&4294967295,n[2]=s+n[2]&4294967295,n[3]=u+n[3]&4294967295},e}();function st(e,t,r,n,i,a){return t=(t+e&4294967295)+(n+a&4294967295)&4294967295,(t<<i|t>>>32-i)+r&4294967295}function H(e,t,r,n,i,a,s){return st(t&r|~t&n,e,t,i,a,s)}function $(e,t,r,n,i,a,s){return st(t&n|r&~n,e,t,i,a,s)}function V(e,t,r,n,i,a,s){return st(t^r^n,e,t,i,a,s)}function X(e,t,r,n,i,a,s){return st(r^(t|~n),e,t,i,a,s)}function _d(e){return typeof e=="string"?e.length===0:e.byteLength===0}function qd(e){return typeof e=="string"?su(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var $r="s3.{region}.amazonaws.com",Fd="s3.{region}.amazonaws.com.cn",jd="s3.{region}.c2s.ic.gov",Gd="s3.{region}.sc2s.sgov.gov",Hd="s3.{region}.amazonaws.com",$d=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Vd=new Set(["cn-north-1","cn-northwest-1"]),Xd=new Set(["us-iso-east-1"]),Wd=new Set(["us-isob-east-1"]),Jd=new Set(["us-gov-east-1","us-gov-west-1"]),Zd=function(e,t){var r=void 0;switch(e){case"af-south-1":r={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":r={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":r={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":r={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":r={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":r={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":r={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":r={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":r={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":r={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":r={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":r={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":r={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":r={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:$d.has(e)&&(r={hostname:$r.replace("{region}",e),partition:"aws"}),Vd.has(e)&&(r={hostname:Fd.replace("{region}",e),partition:"aws-cn"}),Xd.has(e)&&(r={hostname:jd.replace("{region}",e),partition:"aws-iso"}),Wd.has(e)&&(r={hostname:Gd.replace("{region}",e),partition:"aws-iso-b"}),Jd.has(e)&&(r={hostname:Hd.replace("{region}",e),partition:"aws-us-gov"}),r===void 0&&(r={hostname:$r.replace("{region}",e),partition:"aws"})}return Promise.resolve(o({signingService:"s3"},r))},Vr={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:Zd,serviceId:"S3",signingEscapePath:!1,urlParser:fc,useArnRegion:!1},Qd=o(o({},Vr),{runtime:"browser",base64Decoder:vc,base64Encoder:hc,bodyLengthChecker:gc,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:mc({serviceId:Vr.serviceId,clientVersion:Md.version}),eventStreamSerdeProvider:gd,maxAttempts:pc,md5:Kd,region:yc("Region is missing"),requestHandler:new Sc,sha256:Cc.Sha256,streamCollector:bc,streamHasher:zd,utf8Decoder:su,utf8Encoder:Ec}),gu=function(e){return typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6},Yd=function(e){var t=e.split(":");if(t.length<6||t[0]!=="arn")throw new Error("Malformed ARN");var r=ke(t),n=r[1],i=r[2],a=r[3],s=r[4],u=r.slice(5);return{partition:n,service:i,region:a,accountId:s,resource:u.join(":")}},el=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,tl=/(\d+\.){3}\d+/,rl=/\.\./,mu=/\./,nl=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,pu=/^s3(-external-1)?\.amazonaws\.com$/,qt="amazonaws.com",il=function(e){return typeof e.bucketName=="string"},et=function(e){return zr(e)?e.replace(/fips-|-fips/,""):e},al=function(e){return el.test(e)&&!tl.test(e)&&!rl.test(e)},yu=function(e){var t=e.match(nl);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},sl=function(e){return pu.test(e)?["us-east-1",qt]:yu(e)},ol=function(e){return pu.test(e)?[e.replace("."+qt,""),qt]:yu(e)},ul=function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")},cl=function(e){if(e!=="s3"&&e!=="s3-outposts")throw new Error("Expect 's3' or 's3-outposts' in ARN service component")},dl=function(e){if(e!=="s3")throw new Error("Expect 's3' in Accesspoint ARN service component")},ll=function(e){if(e!=="s3-outposts")throw new Error("Expect 's3-posts' in Outpost ARN service component")},fl=function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')},vl=function(e,t){if(e==="")throw new Error("ARN region is empty");if(!t.useArnRegion&&!Xr(e,t.clientRegion)&&!Xr(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&zr(e))throw new Error("Endpoint does not support FIPS region")},zr=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Xr=function(e,t){return e===t||et(e)===t||e===et(t)},hl=function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")},Wr=function(e,t){if(t===void 0&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(t==null?void 0:t.tlsCompatible)&&mu.test(e))throw new Error("Invalid DNS label "+e)},gl=function(e){var t=e.includes(":")?":":"/",r=ke(e.split(t)),n=r[0],i=r.slice(1);if(n==="accesspoint"){if(i.length!==1||i[0]==="")throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}else if(n==="outpost"){if(!i[0]||i[1]!=="accesspoint"||!i[2]||i.length!==3)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var a=ke(i,3),s=a[0];a[1];var u=a[2];return{outpostId:s,accesspointName:u}}else throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")},ml=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},pl=function(e){if(zr(e!=null?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)},Jr=function(e){var t=e.isCustomEndpoint;e.baseHostname;var r=e.dualstackEndpoint,n=e.accelerateEndpoint;if(t){if(r)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(n)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return il(e)?Sl(w(w({},e),{isCustomEndpoint:t})):yl(w(w({},e),{isCustomEndpoint:t}))},yl=function(e){var t=e.isCustomEndpoint,r=e.baseHostname,n=ke(t?[e.clientRegion,r]:ol(r),2),i=n[0],a=n[1],s=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=u===void 0?!1:u,d=e.accelerateEndpoint,f=d===void 0?!1:d,l=e.tlsCompatible,h=l===void 0?!0:l,g=e.useArnRegion,v=e.bucketName,p=e.clientPartition,S=p===void 0?"aws":p,y=e.clientSigningRegion,b=y===void 0?i:y;ul({pathStyleEndpoint:s,accelerateEndpoint:f,tlsCompatible:h});var E=v.service,C=v.partition,k=v.accountId,A=v.region,re=v.resource;cl(E),fl(C,{clientPartition:S}),hl(k),vl(A,{useArnRegion:g,clientRegion:i,clientSigningRegion:b});var R=gl(re),_=R.accesspointName,I=R.outpostId;Wr(_+"-"+k,{tlsCompatible:h});var M=g?A:i,U=g?A:b;if(I){ll(E),Wr(I,{tlsCompatible:h}),ml(c),pl(M);var j=_+"-"+k+"."+I;return{bucketEndpoint:!0,hostname:""+j+(t?"":".s3-outposts."+M)+"."+a,signingRegion:U,signingService:"s3-outposts"}}dl(E);var G=_+"-"+k;return{bucketEndpoint:!0,hostname:""+G+(t?"":".s3-accesspoint"+(c?".dualstack":"")+"."+M)+"."+a,signingRegion:U}},Sl=function(e){var t=e.accelerateEndpoint,r=t===void 0?!1:t,n=e.clientRegion,i=e.baseHostname,a=e.bucketName,s=e.dualstackEndpoint,u=s===void 0?!1:s,c=e.pathStyleEndpoint,d=c===void 0?!1:c,f=e.tlsCompatible,l=f===void 0?!0:f,h=e.isCustomEndpoint,g=h===void 0?!1:h,v=ke(g?[n,i]:sl(i),2),p=v[0],S=v[1];return d||!al(a)||l&&mu.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+p+"."+S:i}:(r?i="s3-accelerate"+(u?".dualstack":"")+"."+S:u&&(i="s3.dualstack."+p+"."+S),{bucketEndpoint:!0,hostname:a+"."+i})},Cl=function(e){return function(t,r){return function(n){return L(void 0,void 0,void 0,function(){var i,a,s,u,y,c,d,f,l,h,g,v,C,k,p,S,y,b,E,C,k;return x(this,function(A){switch(A.label){case 0:return i=n.input.Bucket,a=e.bucketEndpoint,s=n.request,Z.isInstance(s)?e.bucketEndpoint?(s.hostname=i,[3,7]):[3,1]:[3,8];case 1:return gu(i)?(u=Yd(i),c=et,[4,e.region()]):[3,5];case 2:return y=c.apply(void 0,[A.sent()]),[4,e.regionInfoProvider(y)];case 3:return d=A.sent()||{},f=d.partition,l=d.signingRegion,h=l===void 0?y:l,[4,e.useArnRegion()];case 4:return g=A.sent(),v=Jr({bucketName:u,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:s.protocol==="https:",useArnRegion:g,clientPartition:f,clientSigningRegion:h,clientRegion:y,isCustomEndpoint:e.isCustomEndpoint}),C=v.hostname,k=v.bucketEndpoint,p=v.signingRegion,S=v.signingService,p&&p!==h&&(r.signing_region=p),S&&S!=="s3"&&(r.signing_service=S),s.hostname=C,a=k,[3,7];case 5:return b=et,[4,e.region()];case 6:y=b.apply(void 0,[A.sent()]),E=Jr({bucketName:i,clientRegion:y,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:s.protocol==="https:",isCustomEndpoint:e.isCustomEndpoint}),C=E.hostname,k=E.bucketEndpoint,s.hostname=C,a=k,A.label=7;case 7:a&&(s.path=s.path.replace(/^(\/)?[^\/]+/,""),s.path===""&&(s.path="/")),A.label=8;case 8:return[2,t(w(w({},n),{request:s}))]}})})}}},bl={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},ce=function(e){return{applyToStack:function(t){t.addRelativeTo(Cl(e),bl)}}};function El(e){var t=e.bucketEndpoint,r=t===void 0?!1:t,n=e.forcePathStyle,i=n===void 0?!1:n,a=e.useAccelerateEndpoint,s=a===void 0?!1:a,u=e.useDualstackEndpoint,c=u===void 0?!1:u,d=e.useArnRegion,f=d===void 0?!1:d;return w(w({},e),{bucketEndpoint:r,forcePathStyle:i,useAccelerateEndpoint:s,useDualstackEndpoint:c,useArnRegion:typeof f=="function"?f:function(){return Promise.resolve(f)}})}function wl(e){var t=this;return function(r){return function(n){return L(t,void 0,void 0,function(){var i;return x(this,function(a){return i=n.request,Z.isInstance(i)&&i.body&&e.runtime==="node"&&(i.headers=w(w({},i.headers),{Expect:"100-continue"})),[2,r(w(w({},n),{request:i}))]})})}}}var xl={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},kl=function(e){return{applyToStack:function(t){t.add(wl(e),xl)}}};function Ll(){var e=this;return function(t){return function(r){return L(e,void 0,void 0,function(){var n,i;return x(this,function(a){if(n=r.input.Bucket,typeof n=="string"&&!gu(n)&&n.indexOf("/")>=0)throw i=new Error("Bucket name shouldn't contain '/', received '"+n+"'"),i.name="InvalidBucketName",i;return[2,t(w({},r))]})})}}}var Al={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Pl=function(e){return{applyToStack:function(t){t.add(Ll(),Al)}}},Nl=function(e){return function(t){return function(r){return L(void 0,void 0,void 0,function(){var n,i;return x(this,function(a){switch(a.label){case 0:return n=r.request,!Z.isInstance(n)||e.isCustomEndpoint?[2,t(w({},r))]:n.hostname!=="s3.amazonaws.com"?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===a.sent()&&(n.hostname="s3.amazonaws.com"),a.label=3;case 3:return[2,t(w({},r))]}})})}}},Ol={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Tl=function(e){return{applyToStack:function(t){t.add(Nl(e),Ol)}}},Rl=function(e){return function(t){return function(r){return L(void 0,void 0,void 0,function(){var n,i,a,s,u,c,d;return x(this,function(f){switch(f.label){case 0:return[4,t(r)];case 1:return n=f.sent(),i=n.response,Ut.isInstance(i)?(a=i.statusCode,s=i.body,a<200&&a>=300?[2,n]:[4,Su(s,e)]):[2,n];case 2:return u=f.sent(),[4,Bl(u,e)];case 3:if(c=f.sent(),u.length===0)throw d=new Error("S3 aborted request"),d.name="InternalError",d;return c&&c.match("<Error>")&&(i.statusCode=400),i.body=u,[2,n]}})})}}},Su=function(e,t){return e===void 0&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Bl=function(e,t){return Su(e,t).then(function(r){return t.utf8Encoder(r)})},Ml={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Cu=function(e){return{applyToStack:function(t){t.addRelativeTo(Rl(e),Ml)}}},Il=function(e){ie(t,e);function t(r){var n=this,i=o(o({},Qd),r),a=wc(i),s=xc(a),u=kc(s),c=Lc(u),d=Mc(c),f=El(d),l=Ac(f),h=md(l);return n=e.call(this,h)||this,n.config=h,n.middlewareStack.use($c(n.config)),n.middlewareStack.use(Pc(n.config)),n.middlewareStack.use(Nc(n.config)),n.middlewareStack.use(Oc(n.config)),n.middlewareStack.use(Tc(n.config)),n.middlewareStack.use(Pl(n.config)),n.middlewareStack.use(Tl(n.config)),n.middlewareStack.use(kl(n.config)),n.middlewareStack.use(Rc(n.config)),n}return t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Bc),Zr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Zr||(Zr={}));var Ft;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ft||(Ft={}));var jt;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(jt||(jt={}));var Qr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Qr||(Qr={}));var Yr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Yr||(Yr={}));var en;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(en||(en={}));var tn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(tn||(tn={}));var rn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(rn||(rn={}));var nn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(nn||(nn={}));var an;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(an||(an={}));var Gt;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O})}})(Gt||(Gt={}));var sn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(sn||(sn={}));var on;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(on||(on={}));var Ht;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ht||(Ht={}));var un;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(un||(un={}));var $t;(function(e){e.filterSensitiveLog=function(t){return o(o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O})}})($t||($t={}));var Vt;(function(e){e.filterSensitiveLog=function(t){return o(o(o(o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O}),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:O})}})(Vt||(Vt={}));var cn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(cn||(cn={}));var dn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(dn||(dn={}));var ln;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ln||(ln={}));var fn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(fn||(fn={}));var vn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(vn||(vn={}));var hn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(hn||(hn={}));var Xt;(function(e){e.filterSensitiveLog=function(t){return o(o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O})}})(Xt||(Xt={}));var Wt;(function(e){e.filterSensitiveLog=function(t){return o(o(o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O}),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O})}})(Wt||(Wt={}));var gn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(gn||(gn={}));var mn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(mn||(mn={}));var pn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(pn||(pn={}));var yn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(yn||(yn={}));var Sn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Sn||(Sn={}));var Cn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Cn||(Cn={}));var bn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(bn||(bn={}));var En;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(En||(En={}));var wn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(wn||(wn={}));var xn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(xn||(xn={}));var kn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(kn||(kn={}));var Ln;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ln||(Ln={}));var An;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(An||(An={}));var Jt;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Jt||(Jt={}));var Zt;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Zt||(Zt={}));var Pn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Pn||(Pn={}));var Nn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Nn||(Nn={}));var On;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(On||(On={}));var Tn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Tn||(Tn={}));var Rn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Rn||(Rn={}));var Bn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Bn||(Bn={}));var Mn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Mn||(Mn={}));var In;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(In||(In={}));var zn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(zn||(zn={}));var Dn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Dn||(Dn={}));var Un;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Un||(Un={}));var Kn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Kn||(Kn={}));var _n;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(_n||(_n={}));var Be;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Be||(Be={}));var Qt;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Qt||(Qt={}));var Yt;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:Qt.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(Yt||(Yt={}));var qn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(qn||(qn={}));var Fn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Fn||(Fn={}));var jn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(jn||(jn={}));var Gn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Gn||(Gn={}));var Ke;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Filter&&{Filter:Yt.filterSensitiveLog(t.Filter)})}})(Ke||(Ke={}));var Hn;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:Ke.filterSensitiveLog(t.AnalyticsConfiguration)})}})(Hn||(Hn={}));var $n;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})($n||($n={}));var Vn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Vn||(Vn={}));var Xn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Xn||(Xn={}));var Wn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Wn||(Wn={}));var er;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.KMSMasterKeyID&&{KMSMasterKeyID:O})}})(er||(er={}));var tr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:er.filterSensitiveLog(t.ApplyServerSideEncryptionByDefault)})}})(tr||(tr={}));var tt;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Rules&&{Rules:t.Rules.map(function(r){return tr.filterSensitiveLog(r)})})}})(tt||(tt={}));var Jn;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:tt.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}})(Jn||(Jn={}));var Zn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Zn||(Zn={}));var Qn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Qn||(Qn={}));var Yn;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Yn||(Yn={}));var ei;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ei||(ei={}));var ti;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ti||(ti={}));var ri;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ri||(ri={}));var ni;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ni||(ni={}));var rr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.KeyId&&{KeyId:O})}})(rr||(rr={}));var ii;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ii||(ii={}));var nr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMS&&{SSEKMS:rr.filterSensitiveLog(t.SSEKMS)})}})(nr||(nr={}));var ir;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Encryption&&{Encryption:nr.filterSensitiveLog(t.Encryption)})}})(ir||(ir={}));var ar;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.S3BucketDestination&&{S3BucketDestination:ir.filterSensitiveLog(t.S3BucketDestination)})}})(ar||(ar={}));var ai;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ai||(ai={}));var si;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(si||(si={}));var _e;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Destination&&{Destination:ar.filterSensitiveLog(t.Destination)})}})(_e||(_e={}));var oi;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.InventoryConfiguration&&{InventoryConfiguration:_e.filterSensitiveLog(t.InventoryConfiguration)})}})(oi||(oi={}));var ui;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ui||(ui={}));var ci;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ci||(ci={}));var sr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(sr||(sr={}));var or;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:sr.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(or||(or={}));var di;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(di||(di={}));var li;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(li||(li={}));var fi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(fi||(fi={}));var rt;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Filter&&{Filter:or.filterSensitiveLog(t.Filter)})}})(rt||(rt={}));var vi;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Rules&&{Rules:t.Rules.map(function(r){return rt.filterSensitiveLog(r)})})}})(vi||(vi={}));var hi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(hi||(hi={}));var gi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(gi||(gi={}));var mi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(mi||(mi={}));var pi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(pi||(pi={}));var yi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(yi||(yi={}));var Si;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Si||(Si={}));var Ci;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ci||(Ci={}));var ur;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ur||(ur={}));var cr;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:ur.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(cr||(cr={}));var qe;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Filter&&{Filter:cr.filterSensitiveLog(t.Filter)})}})(qe||(qe={}));var bi;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.MetricsConfiguration&&{MetricsConfiguration:qe.filterSensitiveLog(t.MetricsConfiguration)})}})(bi||(bi={}));var Ei;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ei||(Ei={}));var wi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(wi||(wi={}));var xi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(xi||(xi={}));var ki;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ki||(ki={}));var Li;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Li||(Li={}));var Ai;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ai||(Ai={}));var Pi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Pi||(Pi={}));var Ni;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ni||(Ni={}));var Oi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Oi||(Oi={}));var Ti;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ti||(Ti={}));var Ri;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ri||(Ri={}));var Bi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Bi||(Bi={}));var Mi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Mi||(Mi={}));var Ii;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ii||(Ii={}));var zi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(zi||(zi={}));var Di;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Di||(Di={}));var Ui;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ui||(Ui={}));var Ki;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ki||(Ki={}));var _i;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(_i||(_i={}));var qi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(qi||(qi={}));var Fi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Fi||(Fi={}));var ji;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ji||(ji={}));var Gi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Gi||(Gi={}));var Hi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Hi||(Hi={}));var $i;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})($i||($i={}));var dr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(dr||(dr={}));var lr;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:dr.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(lr||(lr={}));var Vi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Vi||(Vi={}));var Xi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Xi||(Xi={}));var Wi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Wi||(Wi={}));var fr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Filter&&{Filter:lr.filterSensitiveLog(t.Filter)})}})(fr||(fr={}));var nt;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Rules&&{Rules:t.Rules.map(function(r){return fr.filterSensitiveLog(r)})})}})(nt||(nt={}));var Ji;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:nt.filterSensitiveLog(t.ReplicationConfiguration)})}})(Ji||(Ji={}));var Zi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Zi||(Zi={}));var Qi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Qi||(Qi={}));var Yi;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Yi||(Yi={}));var ea;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ea||(ea={}));var ta;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ta||(ta={}));var ra;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ra||(ra={}));var na;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(na||(na={}));var ia;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ia||(ia={}));var aa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(aa||(aa={}));var sa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(sa||(sa={}));var oa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(oa||(oa={}));var ua;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ua||(ua={}));var ca;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ca||(ca={}));var da;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(da||(da={}));var la;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(la||(la={}));var vr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O})}})(vr||(vr={}));var hr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O})}})(hr||(hr={}));var fa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(fa||(fa={}));var va;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(va||(va={}));var ha;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ha||(ha={}));var ga;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ga||(ga={}));var ma;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ma||(ma={}));var pa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(pa||(pa={}));var ya;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ya||(ya={}));var Sa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Sa||(Sa={}));var Ca;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ca||(Ca={}));var ba;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ba||(ba={}));var Ea;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ea||(Ea={}));var wa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(wa||(wa={}));var xa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(xa||(xa={}));var ka;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ka||(ka={}));var La;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(La||(La={}));var Aa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Aa||(Aa={}));var Pa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Pa||(Pa={}));var Na;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Na||(Na={}));var Oa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Oa||(Oa={}));var Ta;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ta||(Ta={}));var Ra;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ra||(Ra={}));var Ba;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ba||(Ba={}));var Ma;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ma||(Ma={}));var Ia;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ia||(Ia={}));var za;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O})}})(za||(za={}));var Da;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O})}})(Da||(Da={}));var Ua;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.AnalyticsConfigurationList&&{AnalyticsConfigurationList:t.AnalyticsConfigurationList.map(function(r){return Ke.filterSensitiveLog(r)})})}})(Ua||(Ua={}));var Ka;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ka||(Ka={}));var _a;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(_a||(_a={}));var qa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(qa||(qa={}));var Fa;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.InventoryConfigurationList&&{InventoryConfigurationList:t.InventoryConfigurationList.map(function(r){return _e.filterSensitiveLog(r)})})}})(Fa||(Fa={}));var ja;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ja||(ja={}));var Ga;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.MetricsConfigurationList&&{MetricsConfigurationList:t.MetricsConfigurationList.map(function(r){return qe.filterSensitiveLog(r)})})}})(Ga||(Ga={}));var Ha;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ha||(Ha={}));var $a;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})($a||($a={}));var Va;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Va||(Va={}));var Xa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Xa||(Xa={}));var Wa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Wa||(Wa={}));var Ja;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ja||(Ja={}));var Za;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Za||(Za={}));var Qa;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Qa||(Qa={}));var Ya;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ya||(Ya={}));var es;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(es||(es={}));var ts;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ts||(ts={}));var gr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(gr||(gr={}));var mr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(mr||(mr={}));var rs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(rs||(rs={}));var ns;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ns||(ns={}));var is;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(is||(is={}));var as;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(as||(as={}));var ss;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ss||(ss={}));var pr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(pr||(pr={}));var yr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(yr||(yr={}));var os;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(os||(os={}));var us;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(us||(us={}));var cs;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:Ke.filterSensitiveLog(t.AnalyticsConfiguration)})}})(cs||(cs={}));var ds;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ds||(ds={}));var ls;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ls||(ls={}));var fs;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:tt.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}})(fs||(fs={}));var vs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(vs||(vs={}));var hs;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.InventoryConfiguration&&{InventoryConfiguration:_e.filterSensitiveLog(t.InventoryConfiguration)})}})(hs||(hs={}));var Sr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Rules&&{Rules:t.Rules.map(function(r){return rt.filterSensitiveLog(r)})})}})(Sr||(Sr={}));var gs;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.LifecycleConfiguration&&{LifecycleConfiguration:Sr.filterSensitiveLog(t.LifecycleConfiguration)})}})(gs||(gs={}));var ms;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ms||(ms={}));var ps;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ps||(ps={}));var ys;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.MetricsConfiguration&&{MetricsConfiguration:qe.filterSensitiveLog(t.MetricsConfiguration)})}})(ys||(ys={}));var Ss;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ss||(Ss={}));var Cs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Cs||(Cs={}));var bs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(bs||(bs={}));var Es;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:nt.filterSensitiveLog(t.ReplicationConfiguration)})}})(Es||(Es={}));var ws;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ws||(ws={}));var xs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(xs||(xs={}));var ks;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ks||(ks={}));var Ls;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ls||(Ls={}));var As;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(As||(As={}));var Ps;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ps||(Ps={}));var Ns;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ns||(Ns={}));var Os;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Os||(Os={}));var Cr;(function(e){e.filterSensitiveLog=function(t){return o(o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O})}})(Cr||(Cr={}));var br;(function(e){e.filterSensitiveLog=function(t){return o(o(o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O}),t.SSEKMSKeyId&&{SSEKMSKeyId:O}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:O})}})(br||(br={}));var Ts;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ts||(Ts={}));var Rs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Rs||(Rs={}));var Bs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Bs||(Bs={}));var Ms;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ms||(Ms={}));var Is;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Is||(Is={}));var zs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(zs||(zs={}));var Ds;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ds||(Ds={}));var Us;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Us||(Us={}));var Ks;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ks||(Ks={}));var _s;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(_s||(_s={}));var qs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(qs||(qs={}));var Fs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Fs||(Fs={}));var js;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(js||(js={}));var Gs;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Gs||(Gs={}));var Er;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.KMSKeyId&&{KMSKeyId:O})}})(Er||(Er={}));function zl(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var Je=function(){function e(t,r){r===void 0&&(r=[]),this.name=t,this.children=r,this.attributes={}}return e.prototype.withName=function(t){return this.name=t,this},e.prototype.addAttribute=function(t,r){return this.attributes[t]=r,this},e.prototype.addChildNode=function(t){return this.children.push(t),this},e.prototype.removeAttribute=function(t){return delete this.attributes[t],this},e.prototype.toString=function(){var t,r,n=Boolean(this.children.length),i="<"+this.name,a=this.attributes;try{for(var s=Ue(Object.keys(a)),u=s.next();!u.done;u=s.next()){var c=u.value,d=a[c];typeof d<"u"&&d!==null&&(i+=" "+c+'="'+zl(""+d)+'"')}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i+=n?">"+this.children.map(function(f){return f.toString()}).join("")+"</"+this.name+">":"/>"},e}();function Dl(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Hs=function(){function e(t){this.value=t}return e.prototype.toString=function(){return Dl(""+this.value)},e}(),bu={},Eu={},se={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",i=new RegExp("^"+n+"$"),a=function(u,c){const d=[];let f=c.exec(u);for(;f;){const l=[];l.startIndex=c.lastIndex-f[0].length;const h=f.length;for(let g=0;g<h;g++)l.push(f[g]);d.push(l),f=c.exec(u)}return d},s=function(u){const c=i.exec(u);return!(c===null||typeof c>"u")};e.isExist=function(u){return typeof u<"u"},e.isEmptyObject=function(u){return Object.keys(u).length===0},e.merge=function(u,c,d){if(c){const f=Object.keys(c),l=f.length;for(let h=0;h<l;h++)d==="strict"?u[f[h]]=[c[f[h]]]:u[f[h]]=c[f[h]]}},e.getValue=function(u){return e.isExist(u)?u:""},e.buildOptions=function(u,c,d){let f={};if(!u)return c;for(let l=0;l<d.length;l++)u[d[l]]!==void 0?f[d[l]]=u[d[l]]:f[d[l]]=c[d[l]];return f},e.isTagNameInArrayMode=function(u,c,d){return c===!1?!1:c instanceof RegExp?c.test(u):typeof c=="function"?!!c(u,d):c==="strict"},e.isName=s,e.getAllMatches=a,e.nameRegexp=n})(se);const be=se,wr=function(e,t,r){const n={};if(!t.alwaysCreateTextNode&&(!e.child||be.isEmptyObject(e.child))&&(!e.attrsMap||be.isEmptyObject(e.attrsMap)))return be.isExist(e.val)?e.val:"";if(be.isExist(e.val)&&!(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar))){const a=be.isTagNameInArrayMode(e.tagname,t.arrayMode,r);n[t.textNodeName]=a?[e.val]:e.val}be.merge(n,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let a=0;a<i.length;a++){const s=i[a];if(e.child[s]&&e.child[s].length>1){n[s]=[];for(let u in e.child[s])e.child[s].hasOwnProperty(u)&&n[s].push(wr(e.child[s][u],t,s))}else{const u=wr(e.child[s][0],t,s),c=t.arrayMode===!0&&typeof u=="object"||be.isTagNameInArrayMode(s,t.arrayMode,r);n[s]=c?[u]:u}}return n};Eu.convertToJson=wr;var Le={},Ul=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(n){Array.isArray(this.child[n.tagname])?this.child[n.tagname].push(n):this.child[n.tagname]=[n]}};const Kl=/^[-+]?0x[a-fA-F0-9]+$/,_l=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const ql={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Fl(e,t={}){if(t=Object.assign({},ql,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Kl.test(r))return Number.parseInt(r,16);{const n=_l.exec(r);if(n){const i=n[1],a=n[2];let s=jl(n[3]);const u=n[4]||n[6];if(!t.leadingZeros&&a.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&a.length>0&&!i&&r[1]!==".")return e;{const c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||u?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&s===""||d===s||i&&d==="-"+s?c:e:a?s===d||i+s===d?c:e:r===d||r===i+d?c:e}}else return e}}function jl(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var Gl=Fl;const we=se,Hl=se.buildOptions,Ve=Ul,$l=Gl;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,we.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const wu={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};Le.defaultOptions=wu;const xu=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];Le.props=xu;function Xe(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=r.tagValueProcessor(t,e),t=ku(t,r.parseNodeValue,r.numParseOptions)),t}function Vl(e,t){if(t.ignoreNameSpace){const r=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=n+r[1])}return e}function ku(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:$l(e,r)}else return we.isExist(e)?e:""}const Xl=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function $s(e,t){if(!t.ignoreAttributes&&typeof e=="string"){e=e.replace(/\r?\n/g," ");const r=we.getAllMatches(e,Xl),n=r.length,i={};for(let a=0;a<n;a++){const s=Vl(r[a][1],t);s.length&&(r[a][4]!==void 0?(t.trimValues&&(r[a][4]=r[a][4].trim()),r[a][4]=t.attrValueProcessor(r[a][4],s),i[t.attributeNamePrefix+s]=ku(r[a][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+s]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const a={};return a[t.attrNodeName]=i,a}return i}}const Wl=function(e,t){e=e.replace(/\r\n?/g,`
`),t=Hl(t,wu,xu);const r=new Ve("!xml");let n=r,i="";for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){const u=Ie(e,">",a,"Closing Tag is not closed.");let c=e.substring(a+2,u).trim();if(t.ignoreNameSpace){const d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}n&&(n.val?n.val=we.getValue(n.val)+""+Xe(c,i,t):n.val=Xe(c,i,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],n.attrsMap==null&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,a-n.startIndex-1)),n=n.parent,i="",a=u}else if(e[a+1]==="?")a=Ie(e,"?>",a,"Pi Tag is not closed.");else if(e.substr(a+1,3)==="!--")a=Ie(e,"-->",a,"Comment is not closed.");else if(e.substr(a+1,2)==="!D"){const u=Ie(e,">",a,"DOCTYPE is not closed.");e.substring(a,u).indexOf("[")>=0?a=e.indexOf("]>",a)+1:a=u}else if(e.substr(a+1,2)==="!["){const u=Ie(e,"]]>",a,"CDATA is not closed.")-2,c=e.substring(a+9,u);if(i&&(n.val=we.getValue(n.val)+""+Xe(n.tagname,i,t),i=""),t.cdataTagName){const d=new Ve(t.cdataTagName,n,c);n.addChild(d),n.val=we.getValue(n.val)+t.cdataPositionChar,c&&(d.val=c)}else n.val=(n.val||"")+(c||"");a=u+2}else{const u=Jl(e,a+1);let c=u.data;const d=u.index,f=c.indexOf(" ");let l=c,h=!0;if(f!==-1&&(l=c.substr(0,f).replace(/\s\s*$/,""),c=c.substr(f+1)),t.ignoreNameSpace){const g=l.indexOf(":");g!==-1&&(l=l.substr(g+1),h=l!==u.data.substr(g+1))}if(n&&i&&n.tagname!=="!xml"&&(n.val=we.getValue(n.val)+""+Xe(n.tagname,i,t)),c.length>0&&c.lastIndexOf("/")===c.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),c=l):c=c.substr(0,c.length-1);const g=new Ve(l,n,"");l!==c&&(g.attrsMap=$s(c,t)),n.addChild(g)}else{const g=new Ve(l,n);t.stopNodes.length&&t.stopNodes.includes(g.tagname)&&(g.startIndex=d),l!==c&&h&&(g.attrsMap=$s(c,t)),n.addChild(g),n=g}i="",a=d}else i+=e[a];return r};function Jl(e,t){let r,n="";for(let i=t;i<e.length;i++){let a=e[i];if(r)a===r&&(r="");else if(a==='"'||a==="'")r=a;else{if(a===">")return{data:n,index:i};a==="	"&&(a=" ")}n+=a}}function Ie(e,t,r,n){const i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}Le.getTraversalObj=Wl;var Lu={};const ot=se,Zl={allowBooleanAttributes:!1},Ql=["allowBooleanAttributes"];Lu.validate=function(e,t){t=ot.buildOptions(t,Zl,Ql);const r=[];let n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let a=0;a<e.length;a++)if(e[a]==="<"&&e[a+1]==="?"){if(a+=2,a=Vs(e,a),a.err)return a}else if(e[a]==="<"){let s=a;if(a++,e[a]==="!"){a=Xs(e,a);continue}else{let u=!1;e[a]==="/"&&(u=!0,a++);let c="";for(;a<e.length&&e[a]!==">"&&e[a]!==" "&&e[a]!=="	"&&e[a]!==`
`&&e[a]!=="\r";a++)c+=e[a];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),a--),!of(c)){let l;return c.trim().length===0?l="Invalid space after '<'.":l="Tag '"+c+"' is an invalid name.",q("InvalidTag",l,te(e,a))}const d=tf(e,a);if(d===!1)return q("InvalidAttr","Attributes for '"+c+"' have open quote.",te(e,a));let f=d.value;if(a=d.index,f[f.length-1]==="/"){const l=a-f.length;f=f.substring(0,f.length-1);const h=Ws(f,t);if(h===!0)n=!0;else return q(h.err.code,h.err.msg,te(e,l+h.err.line))}else if(u)if(d.tagClosed){if(f.trim().length>0)return q("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",te(e,s));{const l=r.pop();if(c!==l.tagName){let h=te(e,l.tagStartPos);return q("InvalidTag","Expected closing tag '"+l.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",te(e,s))}r.length==0&&(i=!0)}}else return q("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",te(e,a));else{const l=Ws(f,t);if(l!==!0)return q(l.err.code,l.err.msg,te(e,a-f.length+l.err.line));if(i===!0)return q("InvalidXml","Multiple possible root nodes found.",te(e,a));r.push({tagName:c,tagStartPos:s}),n=!0}for(a++;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="!"){a++,a=Xs(e,a);continue}else if(e[a+1]==="?"){if(a=Vs(e,++a),a.err)return a}else break;else if(e[a]==="&"){const l=af(e,a);if(l==-1)return q("InvalidChar","char '&' is not expected.",te(e,a));a=l}e[a]==="<"&&a--}}else{if(e[a]===" "||e[a]==="	"||e[a]===`
`||e[a]==="\r")continue;return q("InvalidChar","char '"+e[a]+"' is not expected.",te(e,a))}if(n){if(r.length==1)return q("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",te(e,r[0].tagStartPos));if(r.length>0)return q("InvalidXml","Invalid '"+JSON.stringify(r.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return q("InvalidXml","Start tag expected.",1);return!0};function Vs(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return q("InvalidXml","XML declaration allowed only at the start of the document.",te(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Xs(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const Yl='"',ef="'";function tf(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===Yl||e[t]===ef)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}const rf=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ws(e,t){const r=ot.getAllMatches(e,rf),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return q("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",We(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return q("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",We(r[i]));const a=r[i][2];if(!sf(a))return q("InvalidAttr","Attribute '"+a+"' is an invalid name.",We(r[i]));if(!n.hasOwnProperty(a))n[a]=1;else return q("InvalidAttr","Attribute '"+a+"' is repeated.",We(r[i]))}return!0}function nf(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function af(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,nf(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function q(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function sf(e){return ot.isName(e)}function of(e){return ot.isName(e)}function te(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function We(e){return e.startIndex+e[1].length}var gt={},Js;function uf(){if(Js)return gt;Js=1;const e=function(l){return String.fromCharCode(l)},t={nilChar:e(176),missingChar:e(201),nilPremitive:e(175),missingPremitive:e(200),emptyChar:e(178),emptyValue:e(177),boundryChar:e(179),objStart:e(198),arrStart:e(204),arrayEnd:e(185)},r=[t.nilChar,t.nilPremitive,t.missingChar,t.missingPremitive,t.boundryChar,t.emptyChar,t.emptyValue,t.arrayEnd,t.objStart,t.arrStart],n=function(l,h,g){if(typeof h=="string")return l&&l[0]&&l[0].val!==void 0?i(l[0].val):i(l);{const v=u(l);if(v===!0){let p="";if(Array.isArray(h)){p+=t.arrStart;const S=h[0],y=l.length;if(typeof S=="string")for(let b=0;b<y;b++){const E=i(l[b].val);p=a(p,E)}else for(let b=0;b<y;b++){const E=n(l[b],S,g);p=a(p,E)}p+=t.arrayEnd}else{p+=t.objStart;const S=Object.keys(h);Array.isArray(l)&&(l=l[0]);for(let y in S){const b=S[y];let E;!g.ignoreAttributes&&l.attrsMap&&l.attrsMap[b]?E=n(l.attrsMap[b],h[b],g):b===g.textNodeName?E=n(l.val,h[b],g):E=n(l.child[b],h[b],g),p=a(p,E)}}return p}else return v}},i=function(l){switch(l){case void 0:return t.missingPremitive;case null:return t.nilPremitive;case"":return t.emptyValue;default:return l}},a=function(l,h){return!s(h[0])&&!s(l[l.length-1])&&(l+=t.boundryChar),l+h},s=function(l){return r.indexOf(l)!==-1};function u(l){return l===void 0?t.missingChar:l===null?t.nilChar:l.child&&Object.keys(l.child).length===0&&(!l.attrsMap||Object.keys(l.attrsMap).length===0)?t.emptyChar:!0}const c=Le,d=se.buildOptions,f=function(l,h,g){return g=d(g,c.defaultOptions,c.props),n(l,h,g)};return gt.convert2nimn=f,gt}var mt={},Zs;function cf(){if(Zs)return mt;Zs=1;const e=se,t=se.buildOptions,r=Le,n=function(s,u){return u=t(u,r.defaultOptions,r.props),u.indentBy=u.indentBy||"",i(s,u)},i=function(s,u,c){let d="{";const f=Object.keys(s.child);for(let l=0;l<f.length;l++){const h=f[l];if(s.child[h]&&s.child[h].length>1){d+='"'+h+'" : [ ';for(let g in s.child[h])d+=i(s.child[h][g],u)+" , ";d=d.substr(0,d.length-1)+" ] "}else d+='"'+h+'" : '+i(s.child[h][0],u)+" ,"}return e.merge(d,s.attrsMap),e.isEmptyObject(d)?e.isExist(s.val)?s.val:"":(e.isExist(s.val)&&(typeof s.val=="string"&&(s.val===""||s.val===u.cdataPositionChar)||(d+='"'+u.textNodeName+'" : '+a(s.val))),d[d.length-1]===","&&(d=d.substr(0,d.length-2)),d+"}")};function a(s){return s===!0||s===!1||!isNaN(s)?s:'"'+s+'"'}return mt.convertToJsonString=n,mt}var pt,Qs;function df(){if(Qs)return pt;Qs=1;const e=se.buildOptions,t={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(v){return v},attrValueProcessor:function(v){return v}},r=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function n(v){this.options=e(v,t,r),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=h),this.options.cdataTagName?this.isCDATA=g:this.isCDATA=function(){return!1},this.replaceCDATAstr=a,this.replaceCDATAarr=s,this.processTextOrObjNode=i,this.options.format?(this.indentate=l,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=f,this.buildObjNode=c):(this.buildTextNode=d,this.buildObjNode=u),this.buildTextValNode=d,this.buildObjectNode=u}n.prototype.parse=function(v){return Array.isArray(v)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(v={[this.options.rootNodeName]:v}),this.j2x(v,0).val},n.prototype.j2x=function(v,p){let S="",y="";for(let b in v)if(!(typeof v[b]>"u"))if(v[b]===null)y+=this.indentate(p)+"<"+b+"/"+this.tagEndChar;else if(v[b]instanceof Date)y+=this.buildTextNode(v[b],b,"",p);else if(typeof v[b]!="object"){const E=this.isAttribute(b);E?S+=" "+E+'="'+this.options.attrValueProcessor(""+v[b])+'"':this.isCDATA(b)?v[this.options.textNodeName]?y+=this.replaceCDATAstr(v[this.options.textNodeName],v[b]):y+=this.replaceCDATAstr("",v[b]):b===this.options.textNodeName?v[this.options.cdataTagName]||(y+=this.options.tagValueProcessor(""+v[b])):y+=this.buildTextNode(v[b],b,"",p)}else if(Array.isArray(v[b]))if(this.isCDATA(b))y+=this.indentate(p),v[this.options.textNodeName]?y+=this.replaceCDATAarr(v[this.options.textNodeName],v[b]):y+=this.replaceCDATAarr("",v[b]);else{const E=v[b].length;for(let C=0;C<E;C++){const k=v[b][C];typeof k>"u"||(k===null?y+=this.indentate(p)+"<"+b+"/"+this.tagEndChar:typeof k=="object"?y+=this.processTextOrObjNode(k,b,p):y+=this.buildTextNode(k,b,"",p))}}else if(this.options.attrNodeName&&b===this.options.attrNodeName){const E=Object.keys(v[b]),C=E.length;for(let k=0;k<C;k++)S+=" "+E[k]+'="'+this.options.attrValueProcessor(""+v[b][E[k]])+'"'}else y+=this.processTextOrObjNode(v[b],b,p);return{attrStr:S,val:y}};function i(v,p,S){const y=this.j2x(v,S+1);return v[this.options.textNodeName]!==void 0&&Object.keys(v).length===1?this.buildTextNode(y.val,p,y.attrStr,S):this.buildObjNode(y.val,p,y.attrStr,S)}function a(v,p){return v=this.options.tagValueProcessor(""+v),this.options.cdataPositionChar===""||v===""?v+"<![CDATA["+p+"]]"+this.tagEndChar:v.replace(this.options.cdataPositionChar,"<![CDATA["+p+"]]"+this.tagEndChar)}function s(v,p){if(v=this.options.tagValueProcessor(""+v),this.options.cdataPositionChar===""||v==="")return v+"<![CDATA["+p.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let S in p)v=v.replace(this.options.cdataPositionChar,"<![CDATA["+p[S]+"]]>");return v+this.newLine}function u(v,p,S,y){return S&&v.indexOf("<")===-1?this.indentate(y)+"<"+p+S+">"+v+"</"+p+this.tagEndChar:this.indentate(y)+"<"+p+S+this.tagEndChar+v+this.indentate(y)+"</"+p+this.tagEndChar}function c(v,p,S,y){return v!==""?this.buildObjectNode(v,p,S,y):this.indentate(y)+"<"+p+S+"/"+this.tagEndChar}function d(v,p,S,y){return this.indentate(y)+"<"+p+S+">"+this.options.tagValueProcessor(v)+"</"+p+this.tagEndChar}function f(v,p,S,y){return v!==""?this.buildTextValNode(v,p,S,y):this.indentate(y)+"<"+p+S+"/"+this.tagEndChar}function l(v){return this.options.indentBy.repeat(v)}function h(v){return v.startsWith(this.options.attributeNamePrefix)?v.substr(this.attrPrefixLen):!1}function g(v){return v===this.options.cdataTagName}return pt=n,pt}(function(e){const t=Eu,r=Le,n=Le,i=se.buildOptions,a=Lu;e.parse=function(s,u={},c){if(c){c===!0&&(c={});const l=a.validate(s,c);if(l!==!0)throw Error(l.err.msg)}u.parseTrueNumberOnly&&u.parseNodeValue!==!1&&!u.numParseOptions&&(u.numParseOptions={leadingZeros:!1});let d=i(u,n.defaultOptions,n.props);const f=r.getTraversalObj(s,d);return t.convertToJson(f,d)},e.convertTonimn=uf().convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=cf().convertToJsonString,e.validate=a.validate,e.j2xParser=df(),e.parseToNimn=function(s,u,c){return e.convertTonimn(e.getTraversalObj(s,c),u,c)}})(bu);var lf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o({},m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o({"x-id":"AbortMultipartUpload"},e.UploadId!==void 0&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"DELETE",headers:r,path:n,query:a,body:s})]}})})},ff=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l,h;return N(this,function(g){switch(g.label){case 0:if(r=o(o({"content-type":"application/xml"},m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return K(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o({},e.UploadId!==void 0&&{uploadId:e.UploadId}),e.MultipartUpload!==void 0&&(u=$f(e.MultipartUpload),s='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=u.toString()),[4,t.endpoint()];case 1:return c=g.sent(),d=c.hostname,f=c.protocol,l=f===void 0?"https":f,h=c.port,[2,new Z({protocol:l,hostname:d,port:h,method:"POST",headers:r,path:n,query:a,body:s})]}})})},vf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o({},m(e.ACL)&&{"x-amz-acl":e.ACL}),m(e.CacheControl)&&{"cache-control":e.CacheControl}),m(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),m(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),m(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),m(e.ContentType)&&{"content-type":e.ContentType}),m(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),m(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),m(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":xe(e.CopySourceIfModifiedSince).toString()}),m(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),m(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":xe(e.CopySourceIfUnmodifiedSince).toString()}),m(e.Expires)&&{expires:xe(e.Expires).toString()}),m(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),m(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),m(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),m(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),m(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),m(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),m(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),m(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),m(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),m(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),m(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),m(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),m(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),m(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),m(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),m(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),m(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),m(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.Tagging)&&{"x-amz-tagging":e.Tagging}),m(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),m(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),m(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),m(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(g,v){var p;return o(o({},g),(p={},p["x-amz-meta-"+v.toLowerCase()]=e.Metadata[v],p))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={"x-id":"CopyObject"},[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"PUT",headers:r,path:n,query:a,body:s})]}})})},hf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o({},m(e.ACL)&&{"x-amz-acl":e.ACL}),m(e.CacheControl)&&{"cache-control":e.CacheControl}),m(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),m(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),m(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),m(e.ContentType)&&{"content-type":e.ContentType}),m(e.Expires)&&{expires:xe(e.Expires).toString()}),m(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),m(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),m(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),m(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),m(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),m(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),m(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),m(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),m(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),m(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),m(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),m(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),m(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.Tagging)&&{"x-amz-tagging":e.Tagging}),m(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),m(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),m(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(g,v){var p;return o(o({},g),(p={},p["x-amz-meta-"+v.toLowerCase()]=e.Metadata[v],p))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={uploads:""},[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"POST",headers:r,path:n,query:a,body:s})]}})})},gf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o(o(o({},m(e.MFA)&&{"x-amz-mfa":e.MFA}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o({"x-id":"DeleteObject"},e.VersionId!==void 0&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"DELETE",headers:r,path:n,query:a,body:s})]}})})},mf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o(o(o(o(o(o(o(o(o({},m(e.IfMatch)&&{"if-match":e.IfMatch}),m(e.IfModifiedSince)&&{"if-modified-since":xe(e.IfModifiedSince).toString()}),m(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),m(e.IfUnmodifiedSince)&&{"if-unmodified-since":xe(e.IfUnmodifiedSince).toString()}),m(e.Range)&&{range:e.Range}),m(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),m(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),m(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o(o(o(o(o(o(o(o({"x-id":"GetObject"},e.ResponseCacheControl!==void 0&&{"response-cache-control":e.ResponseCacheControl}),e.ResponseContentDisposition!==void 0&&{"response-content-disposition":e.ResponseContentDisposition}),e.ResponseContentEncoding!==void 0&&{"response-content-encoding":e.ResponseContentEncoding}),e.ResponseContentLanguage!==void 0&&{"response-content-language":e.ResponseContentLanguage}),e.ResponseContentType!==void 0&&{"response-content-type":e.ResponseContentType}),e.ResponseExpires!==void 0&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),e.VersionId!==void 0&&{versionId:e.VersionId}),e.PartNumber!==void 0&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"GET",headers:r,path:n,query:a,body:s})]}})})},pf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o({},m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");return a=o(o(o(o(o(o(o({"list-type":"2"},e.Delimiter!==void 0&&{delimiter:e.Delimiter}),e.EncodingType!==void 0&&{"encoding-type":e.EncodingType}),e.MaxKeys!==void 0&&{"max-keys":e.MaxKeys.toString()}),e.Prefix!==void 0&&{prefix:e.Prefix}),e.ContinuationToken!==void 0&&{"continuation-token":e.ContinuationToken}),e.FetchOwner!==void 0&&{"fetch-owner":e.FetchOwner.toString()}),e.StartAfter!==void 0&&{"start-after":e.StartAfter}),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"GET",headers:r,path:n,query:a,body:s})]}})})},yf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:if(r=o(o({},m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(g){return K(g)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o(o(o({"x-id":"ListParts"},e.MaxParts!==void 0&&{"max-parts":e.MaxParts.toString()}),e.PartNumberMarker!==void 0&&{"part-number-marker":e.PartNumberMarker}),e.UploadId!==void 0&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,d=u.protocol,f=d===void 0?"https":d,l=u.port,[2,new Z({protocol:f,hostname:c,port:l,method:"GET",headers:r,path:n,query:a,body:s})]}})})},Sf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l,h;return N(this,function(g){switch(g.label){case 0:if(r=o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o(o({"content-type":"application/octet-stream"},m(e.ACL)&&{"x-amz-acl":e.ACL}),m(e.CacheControl)&&{"cache-control":e.CacheControl}),m(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),m(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),m(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),m(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),m(e.ContentMD5)&&{"content-md5":e.ContentMD5}),m(e.ContentType)&&{"content-type":e.ContentType}),m(e.Expires)&&{expires:xe(e.Expires).toString()}),m(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),m(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),m(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),m(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),m(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),m(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),m(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),m(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),m(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),m(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),m(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),m(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),m(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.Tagging)&&{"x-amz-tagging":e.Tagging}),m(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),m(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),m(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(v,p){var S;return o(o({},v),(S={},S["x-amz-meta-"+p.toLowerCase()]=e.Metadata[p],S))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return K(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={"x-id":"PutObject"},e.Body!==void 0&&(u=e.Body,s=u),[4,t.endpoint()];case 1:return c=g.sent(),d=c.hostname,f=c.protocol,l=f===void 0?"https":f,h=c.port,[2,new Z({protocol:l,hostname:d,port:h,method:"PUT",headers:r,path:n,query:a,body:s})]}})})},Cf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,i,a,s,u,c,d,f,l,h;return N(this,function(g){switch(g.label){case 0:if(r=o(o(o(o(o(o(o({"content-type":"application/octet-stream"},m(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),m(e.ContentMD5)&&{"content-md5":e.ContentMD5}),m(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),m(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),m(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),m(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),m(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",K(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return K(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=o(o({"x-id":"UploadPart"},e.PartNumber!==void 0&&{partNumber:e.PartNumber.toString()}),e.UploadId!==void 0&&{uploadId:e.UploadId}),e.Body!==void 0&&(u=e.Body,s=u),[4,t.endpoint()];case 1:return c=g.sent(),d=c.hostname,f=c.protocol,l=f===void 0?"https":f,h=c.port,[2,new Z({protocol:l,hostname:d,port:h,method:"PUT",headers:r,path:n,query:a,body:s})]}})})},bf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){switch(n.label){case 0:return e.statusCode!==204&&e.statusCode>=300?[2,Ef(e,t)]:(r={$metadata:T(e),RequestCharged:void 0},e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ge(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},Ef=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c,d,f;return N(this,function(l){switch(l.label){case 0:return n=[o({},e)],f={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(f.body=l.sent(),f)])),a="UnknownError",a=de(e,r.body),s=a,s){case"NoSuchUpload":return[3,2];case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return u=[{}],[4,Gf(r)];case 3:return i=o.apply(void 0,[o.apply(void 0,u.concat([l.sent()])),{name:a,$metadata:T(e)}]),[3,5];case 4:c=r.body,a=c.code||c.Code||a,i=o(o({},c),{name:""+a,message:c.message||c.Message||a,$fault:"client",$metadata:T(e)}),l.label=5;case 5:return d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},wf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,xf(e,t)]:(r={$metadata:T(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,W(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.ETag!==void 0&&(r.ETag=n.ETag),n.Key!==void 0&&(r.Key=n.Key),n.Location!==void 0&&(r.Location=n.Location),[2,Promise.resolve(r)]}})})},xf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},kf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Lf(e,t)]:(r={$metadata:T(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-copy-source-version-id"]!==void 0&&(r.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,W(e.body,t)]);case 1:return n=i.sent(),r.CopyObjectResult=Zf(n),[2,Promise.resolve(r)]}})})},Lf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c,d,f;return N(this,function(l){switch(l.label){case 0:return n=[o({},e)],f={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(f.body=l.sent(),f)])),a="UnknownError",a=de(e,r.body),s=a,s){case"ObjectNotInActiveTierError":return[3,2];case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return u=[{}],[4,Hf(r)];case 3:return i=o.apply(void 0,[o.apply(void 0,u.concat([l.sent()])),{name:a,$metadata:T(e)}]),[3,5];case 4:c=r.body,a=c.code||c.Code||a,i=o(o({},c),{name:""+a,message:c.message||c.Message||a,$fault:"client",$metadata:T(e)}),l.label=5;case 5:return d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Af=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Pf(e,t)]:(r={$metadata:T(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},e.headers["x-amz-abort-date"]!==void 0&&(r.AbortDate=new Date(e.headers["x-amz-abort-date"])),e.headers["x-amz-abort-rule-id"]!==void 0&&(r.AbortRuleId=e.headers["x-amz-abort-rule-id"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,W(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.Key!==void 0&&(r.Key=n.Key),n.UploadId!==void 0&&(r.UploadId=n.UploadId),[2,Promise.resolve(r)]}})})},Pf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Nf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){switch(n.label){case 0:return e.statusCode!==204&&e.statusCode>=300?[2,Of(e,t)]:(r={$metadata:T(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},e.headers["x-amz-delete-marker"]!==void 0&&(r.DeleteMarker=e.headers["x-amz-delete-marker"]==="true"),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ge(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},Of=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Tf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){return e.statusCode!==200&&e.statusCode>=300?[2,Rf(e,t)]:(r={$metadata:T(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},e.headers["x-amz-delete-marker"]!==void 0&&(r.DeleteMarker=e.headers["x-amz-delete-marker"]==="true"),e.headers["accept-ranges"]!==void 0&&(r.AcceptRanges=e.headers["accept-ranges"]),e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-restore"]!==void 0&&(r.Restore=e.headers["x-amz-restore"]),e.headers["last-modified"]!==void 0&&(r.LastModified=new Date(e.headers["last-modified"])),e.headers["content-length"]!==void 0&&(r.ContentLength=parseInt(e.headers["content-length"],10)),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-missing-meta"]!==void 0&&(r.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["cache-control"]!==void 0&&(r.CacheControl=e.headers["cache-control"]),e.headers["content-disposition"]!==void 0&&(r.ContentDisposition=e.headers["content-disposition"]),e.headers["content-encoding"]!==void 0&&(r.ContentEncoding=e.headers["content-encoding"]),e.headers["content-language"]!==void 0&&(r.ContentLanguage=e.headers["content-language"]),e.headers["content-range"]!==void 0&&(r.ContentRange=e.headers["content-range"]),e.headers["content-type"]!==void 0&&(r.ContentType=e.headers["content-type"]),e.headers.expires!==void 0&&(r.Expires=new Date(e.headers.expires)),e.headers["x-amz-website-redirect-location"]!==void 0&&(r.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-storage-class"]!==void 0&&(r.StorageClass=e.headers["x-amz-storage-class"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),e.headers["x-amz-replication-status"]!==void 0&&(r.ReplicationStatus=e.headers["x-amz-replication-status"]),e.headers["x-amz-mp-parts-count"]!==void 0&&(r.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),e.headers["x-amz-tagging-count"]!==void 0&&(r.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),e.headers["x-amz-object-lock-mode"]!==void 0&&(r.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),e.headers["x-amz-object-lock-retain-until-date"]!==void 0&&(r.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),e.headers["x-amz-object-lock-legal-hold"]!==void 0&&(r.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach(function(a){r.Metadata===void 0&&(r.Metadata={}),a.startsWith("x-amz-meta-")&&(r.Metadata[a.substring(11)]=e.headers[a])}),n=e.body,r.Body=n,[2,Promise.resolve(r)])})})},Rf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c,d,f,l;return N(this,function(h){switch(h.label){case 0:return n=[o({},e)],l={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(l.body=h.sent(),l)])),a="UnknownError",a=de(e,r.body),s=a,s){case"InvalidObjectState":return[3,2];case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":return[3,4];case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return u=[{}],[4,qf(r)];case 3:return i=o.apply(void 0,[o.apply(void 0,u.concat([h.sent()])),{name:a,$metadata:T(e)}]),[3,7];case 4:return c=[{}],[4,jf(r)];case 5:return i=o.apply(void 0,[o.apply(void 0,c.concat([h.sent()])),{name:a,$metadata:T(e)}]),[3,7];case 6:d=r.body,a=d.code||d.Code||a,i=o(o({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:T(e)}),h.label=7;case 7:return f=i.message||i.Message||a,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}})})},Bf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Mf(e,t)]:(r={$metadata:T(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,W(e.body,t)]);case 1:return n=i.sent(),n.CommonPrefixes===""&&(r.CommonPrefixes=[]),n.CommonPrefixes!==void 0&&(r.CommonPrefixes=Jf(_t(n.CommonPrefixes))),n.Contents===""&&(r.Contents=[]),n.Contents!==void 0&&(r.Contents=ev(_t(n.Contents))),n.ContinuationToken!==void 0&&(r.ContinuationToken=n.ContinuationToken),n.Delimiter!==void 0&&(r.Delimiter=n.Delimiter),n.EncodingType!==void 0&&(r.EncodingType=n.EncodingType),n.IsTruncated!==void 0&&(r.IsTruncated=n.IsTruncated=="true"),n.KeyCount!==void 0&&(r.KeyCount=parseInt(n.KeyCount)),n.MaxKeys!==void 0&&(r.MaxKeys=parseInt(n.MaxKeys)),n.Name!==void 0&&(r.Name=n.Name),n.NextContinuationToken!==void 0&&(r.NextContinuationToken=n.NextContinuationToken),n.Prefix!==void 0&&(r.Prefix=n.Prefix),n.StartAfter!==void 0&&(r.StartAfter=n.StartAfter),[2,Promise.resolve(r)]}})})},Mf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c,d,f;return N(this,function(l){switch(l.label){case 0:return n=[o({},e)],f={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(f.body=l.sent(),f)])),a="UnknownError",a=de(e,r.body),s=a,s){case"NoSuchBucket":return[3,2];case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return u=[{}],[4,Ff(r)];case 3:return i=o.apply(void 0,[o.apply(void 0,u.concat([l.sent()])),{name:a,$metadata:T(e)}]),[3,5];case 4:c=r.body,a=c.code||c.Code||a,i=o(o({},c),{name:""+a,message:c.message||c.Message||a,$fault:"client",$metadata:T(e)}),l.label=5;case 5:return d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},If=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,zf(e,t)]:(r={$metadata:T(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},e.headers["x-amz-abort-date"]!==void 0&&(r.AbortDate=new Date(e.headers["x-amz-abort-date"])),e.headers["x-amz-abort-rule-id"]!==void 0&&(r.AbortRuleId=e.headers["x-amz-abort-rule-id"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,W(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.Initiator!==void 0&&(r.Initiator=Qf(n.Initiator)),n.IsTruncated!==void 0&&(r.IsTruncated=n.IsTruncated=="true"),n.Key!==void 0&&(r.Key=n.Key),n.MaxParts!==void 0&&(r.MaxParts=parseInt(n.MaxParts)),n.NextPartNumberMarker!==void 0&&(r.NextPartNumberMarker=n.NextPartNumberMarker),n.Owner!==void 0&&(r.Owner=Au(n.Owner)),n.PartNumberMarker!==void 0&&(r.PartNumberMarker=n.PartNumberMarker),n.Part===""&&(r.Parts=[]),n.Part!==void 0&&(r.Parts=rv(_t(n.Part))),n.StorageClass!==void 0&&(r.StorageClass=n.StorageClass),n.UploadId!==void 0&&(r.UploadId=n.UploadId),[2,Promise.resolve(r)]}})})},zf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Df=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){switch(n.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Uf(e,t)]:(r={$metadata:T(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ge(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},Uf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Kf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){switch(n.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,_f(e,t)]:(r={$metadata:T(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ge(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},_f=function(e,t){return P(void 0,void 0,void 0,function(){var r,n,i,a,s,u,c;return N(this,function(d){switch(d.label){case 0:return n=[o({},e)],c={},[4,W(e.body,t)];case 1:switch(r=o.apply(void 0,n.concat([(c.body=d.sent(),c)])),a="UnknownError",a=de(e,r.body),a){default:s=r.body,a=s.code||s.Code||a,i=o(o({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:T(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},qf=function(e,t){return P(void 0,void 0,void 0,function(){var r,n;return N(this,function(i){return r={name:"InvalidObjectState",$fault:"client",$metadata:T(e),AccessTier:void 0,StorageClass:void 0},n=e.body,n.AccessTier!==void 0&&(r.AccessTier=n.AccessTier),n.StorageClass!==void 0&&(r.StorageClass=n.StorageClass),[2,r]})})},Ff=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){return r={name:"NoSuchBucket",$fault:"client",$metadata:T(e)},e.body,[2,r]})})},jf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){return r={name:"NoSuchKey",$fault:"client",$metadata:T(e)},e.body,[2,r]})})},Gf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){return r={name:"NoSuchUpload",$fault:"client",$metadata:T(e)},e.body,[2,r]})})},Hf=function(e,t){return P(void 0,void 0,void 0,function(){var r;return N(this,function(n){return r={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:T(e)},e.body,[2,r]})})},$f=function(e,t){var r=new Je("CompletedMultipartUpload");if(e.Parts!==void 0&&e.Parts!==null){var n=Xf(e.Parts);n.map(function(i){i=i.withName("Part"),r.addChildNode(i)})}return r},Vf=function(e,t){var r=new Je("CompletedPart");if(e.ETag!==void 0&&e.ETag!==null){var n=new Je("ETag").addChildNode(new Hs(e.ETag)).withName("ETag");r.addChildNode(n)}if(e.PartNumber!==void 0&&e.PartNumber!==null){var n=new Je("PartNumber").addChildNode(new Hs(String(e.PartNumber))).withName("PartNumber");r.addChildNode(n)}return r},Xf=function(e,t){return e.filter(function(r){return r!=null}).map(function(r){if(r===null)return null;var n=Vf(r);return n.withName("member")})},Wf=function(e,t){var r={Prefix:void 0};return e.Prefix!==void 0&&(r.Prefix=e.Prefix),r},Jf=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:Wf(r)})},Zf=function(e,t){var r={ETag:void 0,LastModified:void 0};return e.ETag!==void 0&&(r.ETag=e.ETag),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),r},Qf=function(e,t){var r={ID:void 0,DisplayName:void 0};return e.ID!==void 0&&(r.ID=e.ID),e.DisplayName!==void 0&&(r.DisplayName=e.DisplayName),r},Yf=function(e,t){var r={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return e.Key!==void 0&&(r.Key=e.Key),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),e.ETag!==void 0&&(r.ETag=e.ETag),e.Size!==void 0&&(r.Size=parseInt(e.Size)),e.StorageClass!==void 0&&(r.StorageClass=e.StorageClass),e.Owner!==void 0&&(r.Owner=Au(e.Owner)),r},ev=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:Yf(r)})},Au=function(e,t){var r={DisplayName:void 0,ID:void 0};return e.DisplayName!==void 0&&(r.DisplayName=e.DisplayName),e.ID!==void 0&&(r.ID=e.ID),r},tv=function(e,t){var r={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return e.PartNumber!==void 0&&(r.PartNumber=parseInt(e.PartNumber)),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),e.ETag!==void 0&&(r.ETag=e.ETag),e.Size!==void 0&&(r.Size=parseInt(e.Size)),r},rv=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:tv(r)})},T=function(e){var t;return{httpStatusCode:e.statusCode,requestId:(t=e.headers["x-amzn-requestid"])!==null&&t!==void 0?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Ge=function(e,t){return e===void 0&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},nv=function(e,t){return Ge(e,t).then(function(r){return t.utf8Encoder(r)})},m=function(e){return e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0)},iv=function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")},W=function(e,t){return nv(e,t).then(function(r){if(r.length){var n=bu.parse(r,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(u,c){return iv(u)}}),i="#text",a=Object.keys(n)[0],s=n[a];return s[i]&&(s[a]=s[i],delete s[i]),du(s)}return{}})},de=function(e,t){return t.Code!==void 0?t.Code:e.statusCode==404?"NotFound":""},Pu=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="AbortMultipartUploadCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:jt.filterSensitiveLog,outputFilterSensitiveLog:Ft.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return lf(r,n)},t.prototype.deserialize=function(r,n){return bf(r,n)},t}(ue),Nu=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(Cu(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="CompleteMultipartUploadCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:Ht.filterSensitiveLog,outputFilterSensitiveLog:Gt.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return ff(r,n)},t.prototype.deserialize=function(r,n){return wf(r,n)},t}(ue);function av(e){var t=this;return function(r){return function(n){return L(t,void 0,void 0,function(){var i,a,s,u,c,d,f,l,h,g,v,p,S,y,b,E,C;return x(this,function(k){switch(k.label){case 0:i=w({},n.input),a=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],k.label=1;case 1:k.trys.push([1,6,7,8]),s=Ue(a),u=s.next(),k.label=2;case 2:return u.done?[3,5]:(c=u.value,d=i[c.target],d?(f=ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):typeof d=="string"?e.utf8Decoder(d):new Uint8Array(d),l=e.base64Encoder(f),h=new e.md5,h.update(f),g=[w({},i)],C={},C[c.target]=l,v=c.hash,S=(p=e).base64Encoder,[4,h.digest()]):[3,4]);case 3:i=w.apply(void 0,g.concat([(C[v]=S.apply(p,[k.sent()]),C)])),k.label=4;case 4:return u=s.next(),[3,2];case 5:return[3,8];case 6:return y=k.sent(),b={error:y},[3,8];case 7:try{u&&!u.done&&(E=s.return)&&E.call(s)}finally{if(b)throw b.error}return[7];case 8:return[2,r(w(w({},n),{input:i}))]}})})}}}var sv={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},He=function(e){return{applyToStack:function(t){t.add(av(e),sv)}}},ov=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(Cu(n)),this.middlewareStack.use(He(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="CopyObjectCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:Vt.filterSensitiveLog,outputFilterSensitiveLog:$t.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return vf(r,n)},t.prototype.deserialize=function(r,n){return kf(r,n)},t}(ue),Ou=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(He(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="CreateMultipartUploadCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:Wt.filterSensitiveLog,outputFilterSensitiveLog:Xt.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return hf(r,n)},t.prototype.deserialize=function(r,n){return Af(r,n)},t}(ue),uv=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="DeleteObjectCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:Zt.filterSensitiveLog,outputFilterSensitiveLog:Jt.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return gf(r,n)},t.prototype.deserialize=function(r,n){return Nf(r,n)},t}(ue),Ys=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(He(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="GetObjectCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:hr.filterSensitiveLog,outputFilterSensitiveLog:vr.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return mf(r,n)},t.prototype.deserialize=function(r,n){return Tf(r,n)},t}(ue),Tu=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="ListObjectsV2Command",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:mr.filterSensitiveLog,outputFilterSensitiveLog:gr.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return pf(r,n)},t.prototype.deserialize=function(r,n){return Bf(r,n)},t}(ue),Ru=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="ListPartsCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:yr.filterSensitiveLog,outputFilterSensitiveLog:pr.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return yf(r,n)},t.prototype.deserialize=function(r,n){return If(r,n)},t}(ue),cv=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(He(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="PutObjectCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:br.filterSensitiveLog,outputFilterSensitiveLog:Cr.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return Sf(r,n)},t.prototype.deserialize=function(r,n){return Df(r,n)},t}(ue),eo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(eo||(eo={}));var xr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Encryption&&{Encryption:Er.filterSensitiveLog(t.Encryption)})}})(xr||(xr={}));var kr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.S3&&{S3:xr.filterSensitiveLog(t.S3)})}})(kr||(kr={}));var to;(function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"})(to||(to={}));var ro;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ro||(ro={}));var no;(function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"})(no||(no={}));var io;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(io||(io={}));var ao;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(ao||(ao={}));var so;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(so||(so={}));var oo;(function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"})(oo||(oo={}));var uo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(uo||(uo={}));var co;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(co||(co={}));var lo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(lo||(lo={}));var fo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(fo||(fo={}));var vo;(function(e){e.SELECT="SELECT"})(vo||(vo={}));var Lr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.OutputLocation&&{OutputLocation:kr.filterSensitiveLog(t.OutputLocation)})}})(Lr||(Lr={}));var ho;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.RestoreRequest&&{RestoreRequest:Lr.filterSensitiveLog(t.RestoreRequest)})}})(ho||(ho={}));var Ar;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Ar||(Ar={}));var Pr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Pr||(Pr={}));var go;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(go||(go={}));var Nr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Nr||(Nr={}));var Or;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Or||(Or={}));var mo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(mo||(mo={}));var Tr;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Tr||(Tr={}));var po;(function(e){e.visit=function(t,r){return t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Records!==void 0)return{Records:Or.filterSensitiveLog(t.Records)};if(t.Stats!==void 0)return{Stats:Tr.filterSensitiveLog(t.Stats)};if(t.Progress!==void 0)return{Progress:Nr.filterSensitiveLog(t.Progress)};if(t.Cont!==void 0)return{Cont:Ar.filterSensitiveLog(t.Cont)};if(t.End!==void 0)return{End:Pr.filterSensitiveLog(t.End)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(po||(po={}));var yo;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.Payload&&{Payload:"STREAMING_CONTENT"})}})(yo||(yo={}));var So;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(So||(So={}));var Co;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Co||(Co={}));var bo;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O})}})(bo||(bo={}));var Rr;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O})}})(Rr||(Rr={}));var Br;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O})}})(Br||(Br={}));var Eo;(function(e){e.filterSensitiveLog=function(t){return o({},t)}})(Eo||(Eo={}));var wo;(function(e){e.filterSensitiveLog=function(t){return o(o({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:O})}})(wo||(wo={}));var xo;(function(e){e.filterSensitiveLog=function(t){return o(o(o({},t),t.SSECustomerKey&&{SSECustomerKey:O}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:O})}})(xo||(xo={}));var Bu=function(e){ie(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(oe(n,this.serialize,this.deserialize)),this.middlewareStack.use(He(n)),this.middlewareStack.use(ce(n));var a=r.concat(this.middlewareStack),s=n.logger,u="S3Client",c="UploadPartCommand",d={logger:s,clientName:u,commandName:c,inputFilterSensitiveLog:Br.filterSensitiveLog,outputFilterSensitiveLog:Rr.filterSensitiveLog},f=n.requestHandler;return a.resolve(function(l){return f.handle(l.request,i||{})},d)},t.prototype.serialize=function(r,n){return Cf(r,n)},t.prototype.deserialize=function(r,n){return Kf(r,n)},t}(ue);function dv(e){var t=e.port,r=e.query,n=e.protocol,i=e.path,a=e.hostname;n&&n.substr(-1)!==":"&&(n+=":"),t&&(a+=":"+t),i&&i.charAt(0)!=="/"&&(i="/"+i);var s=r?ou(r):"";return s&&s[0]!=="?"&&(s="?"+s),n+"//"+a+i+s}function lv(e,t){return L(this,void 0,void 0,function(){var r,n,i,a=this;return x(this,function(s){switch(s.label){case 0:return r=function(u){return function(c){return L(a,void 0,void 0,function(){return x(this,function(d){return[2,{output:{request:c.request},response:void 0}]})})}},n=e.middlewareStack.clone(),n.add(r,{step:"build",priority:"low"}),i=t.resolveMiddleware(n,e.config,void 0),[4,i(t).then(function(u){return u.output.request})];case 1:return[2,s.sent()]}})})}var fv="UNSIGNED-PAYLOAD",vv="X-Amz-Content-Sha256",hv=function(){function e(t){var r=w({service:t.signingName||t.service||"s3",uriEscapePath:t.uriEscapePath||!1},t);this.signer=new Ic(r)}return e.prototype.presign=function(t,r){r===void 0&&(r={});var n=r.unsignableHeaders,i=n===void 0?new Set:n,a=r.unhoistableHeaders,s=a===void 0?new Set:a,u=zc(r,["unsignableHeaders","unhoistableHeaders"]);return L(this,void 0,void 0,function(){return x(this,function(c){return i.add("content-type"),Object.keys(t.headers).map(function(d){return d.toLowerCase()}).filter(function(d){return d.startsWith("x-amz-server-side-encryption")}).forEach(function(d){s.add(d)}),t.headers[vv]=fv,t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,w({expiresIn:900,unsignableHeaders:i,unhoistableHeaders:s},u))]})})},e}(),Mu={exports:{}},Dr={exports:{}},Iu=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}},gv=Iu,Ce=Object.prototype.toString;function Ur(e){return Array.isArray(e)}function Mr(e){return typeof e>"u"}function mv(e){return e!==null&&!Mr(e)&&e.constructor!==null&&!Mr(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function zu(e){return Ce.call(e)==="[object ArrayBuffer]"}function pv(e){return Ce.call(e)==="[object FormData]"}function yv(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zu(e.buffer),t}function Sv(e){return typeof e=="string"}function Cv(e){return typeof e=="number"}function Du(e){return e!==null&&typeof e=="object"}function Ze(e){if(Ce.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function bv(e){return Ce.call(e)==="[object Date]"}function Ev(e){return Ce.call(e)==="[object File]"}function wv(e){return Ce.call(e)==="[object Blob]"}function Uu(e){return Ce.call(e)==="[object Function]"}function xv(e){return Du(e)&&Uu(e.pipe)}function kv(e){return Ce.call(e)==="[object URLSearchParams]"}function Lv(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Av(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Kr(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Ur(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function Ir(){var e={};function t(i,a){Ze(e[a])&&Ze(i)?e[a]=Ir(e[a],i):Ze(i)?e[a]=Ir({},i):Ur(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)Kr(arguments[r],t);return e}function Pv(e,t,r){return Kr(t,function(i,a){r&&typeof i=="function"?e[a]=gv(i,r):e[a]=i}),e}function Nv(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Q={isArray:Ur,isArrayBuffer:zu,isBuffer:mv,isFormData:pv,isArrayBufferView:yv,isString:Sv,isNumber:Cv,isObject:Du,isPlainObject:Ze,isUndefined:Mr,isDate:bv,isFile:Ev,isBlob:wv,isFunction:Uu,isStream:xv,isURLSearchParams:kv,isStandardBrowserEnv:Av,forEach:Kr,merge:Ir,extend:Pv,trim:Lv,stripBOM:Nv},Pe=Q;function ko(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ku=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(Pe.isURLSearchParams(r))i=r.toString();else{var a=[];Pe.forEach(r,function(c,d){c===null||typeof c>"u"||(Pe.isArray(c)?d=d+"[]":c=[c],Pe.forEach(c,function(l){Pe.isDate(l)?l=l.toISOString():Pe.isObject(l)&&(l=JSON.stringify(l)),a.push(ko(d)+"="+ko(l))}))}),i=a.join("&")}if(i){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},Ov=Q;function ut(){this.handlers=[]}ut.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ut.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ut.prototype.forEach=function(t){Ov.forEach(this.handlers,function(n){n!==null&&t(n)})};var Tv=ut,Rv=Q,Bv=function(t,r){Rv.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})},_u=function(t,r,n,i,a){return t.config=r,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},yt,Lo;function qu(){if(Lo)return yt;Lo=1;var e=_u;return yt=function(r,n,i,a,s){var u=new Error(r);return e(u,n,i,a,s)},yt}var St,Ao;function Mv(){if(Ao)return St;Ao=1;var e=qu();return St=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(e("Request failed with status code "+i.status,i.config,null,i.request,i))},St}var Ct,Po;function Iv(){if(Po)return Ct;Po=1;var e=Q;return Ct=e.isStandardBrowserEnv()?function(){return{write:function(n,i,a,s,u,c){var d=[];d.push(n+"="+encodeURIComponent(i)),e.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),e.isString(s)&&d.push("path="+s),e.isString(u)&&d.push("domain="+u),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ct}var bt,No;function zv(){return No||(No=1,bt=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),bt}var Et,Oo;function Dv(){return Oo||(Oo=1,Et=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),Et}var wt,To;function Uv(){if(To)return wt;To=1;var e=zv(),t=Dv();return wt=function(n,i){return n&&!e(i)?t(n,i):i},wt}var xt,Ro;function Kv(){if(Ro)return xt;Ro=1;var e=Q,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return xt=function(n){var i={},a,s,u;return n&&e.forEach(n.split(`
`),function(d){if(u=d.indexOf(":"),a=e.trim(d.substr(0,u)).toLowerCase(),s=e.trim(d.substr(u+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([s]):i[a]=i[a]?i[a]+", "+s:s}}),i},xt}var kt,Bo;function _v(){if(Bo)return kt;Bo=1;var e=Q;return kt=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(s){var u=s;return r&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(u){var c=e.isString(u)?a(u):u;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),kt}var Lt,Mo;function ct(){if(Mo)return Lt;Mo=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Lt=e,Lt}var At,Io;function zo(){if(Io)return At;Io=1;var e=Q,t=Mv(),r=Iv(),n=Ku,i=Uv(),a=Kv(),s=_v(),u=qu(),c=dt(),d=ct();return At=function(l){return new Promise(function(g,v){var p=l.data,S=l.headers,y=l.responseType,b;function E(){l.cancelToken&&l.cancelToken.unsubscribe(b),l.signal&&l.signal.removeEventListener("abort",b)}e.isFormData(p)&&delete S["Content-Type"];var C=new XMLHttpRequest;if(l.auth){var k=l.auth.username||"",A=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";S.Authorization="Basic "+btoa(k+":"+A)}var re=i(l.baseURL,l.url);C.open(l.method.toUpperCase(),n(re,l.params,l.paramsSerializer),!0),C.timeout=l.timeout;function R(){if(!!C){var I="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,M=!y||y==="text"||y==="json"?C.responseText:C.response,U={data:M,status:C.status,statusText:C.statusText,headers:I,config:l,request:C};t(function(G){g(G),E()},function(G){v(G),E()},U),C=null}}if("onloadend"in C?C.onloadend=R:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(R)},C.onabort=function(){!C||(v(u("Request aborted",l,"ECONNABORTED",C)),C=null)},C.onerror=function(){v(u("Network Error",l,null,C)),C=null},C.ontimeout=function(){var M=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",U=l.transitional||c.transitional;l.timeoutErrorMessage&&(M=l.timeoutErrorMessage),v(u(M,l,U.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},e.isStandardBrowserEnv()){var _=(l.withCredentials||s(re))&&l.xsrfCookieName?r.read(l.xsrfCookieName):void 0;_&&(S[l.xsrfHeaderName]=_)}"setRequestHeader"in C&&e.forEach(S,function(M,U){typeof p>"u"&&U.toLowerCase()==="content-type"?delete S[U]:C.setRequestHeader(U,M)}),e.isUndefined(l.withCredentials)||(C.withCredentials=!!l.withCredentials),y&&y!=="json"&&(C.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&C.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(b=function(I){!C||(v(!I||I&&I.type?new d("canceled"):I),C.abort(),C=null)},l.cancelToken&&l.cancelToken.subscribe(b),l.signal&&(l.signal.aborted?b():l.signal.addEventListener("abort",b))),p||(p=null),C.send(p)})},At}var Pt,Do;function dt(){if(Do)return Pt;Do=1;var e=Q,t=Bv,r=_u,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,d){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function a(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=zo()),c}function s(c,d,f){if(e.isString(c))try{return(d||JSON.parse)(c),e.trim(c)}catch(l){if(l.name!=="SyntaxError")throw l}return(f||JSON.stringify)(c)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(d,f){return t(f,"Accept"),t(f,"Content-Type"),e.isFormData(d)||e.isArrayBuffer(d)||e.isBuffer(d)||e.isStream(d)||e.isFile(d)||e.isBlob(d)?d:e.isArrayBufferView(d)?d.buffer:e.isURLSearchParams(d)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):e.isObject(d)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),s(d)):d}],transformResponse:[function(d){var f=this.transitional||u.transitional,l=f&&f.silentJSONParsing,h=f&&f.forcedJSONParsing,g=!l&&this.responseType==="json";if(g||h&&e.isString(d)&&d.length)try{return JSON.parse(d)}catch(v){if(g)throw v.name==="SyntaxError"?r(v,this,"E_JSON_PARSE"):v}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(d){u.headers[d]={}}),e.forEach(["post","put","patch"],function(d){u.headers[d]=e.merge(n)}),Pt=u,Pt}var qv=Q,Fv=dt(),jv=function(t,r,n){var i=this||Fv;return qv.forEach(n,function(s){t=s.call(i,t,r)}),t},Nt,Uo;function Fu(){return Uo||(Uo=1,Nt=function(t){return!!(t&&t.__CANCEL__)}),Nt}var Ko=Q,Ot=jv,Gv=Fu(),Hv=dt(),$v=ct();function Tt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $v("canceled")}var Vv=function(t){Tt(t),t.headers=t.headers||{},t.data=Ot.call(t,t.data,t.headers,t.transformRequest),t.headers=Ko.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Ko.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||Hv.adapter;return r(t).then(function(i){return Tt(t),i.data=Ot.call(t,i.data,i.headers,t.transformResponse),i},function(i){return Gv(i)||(Tt(t),i&&i.response&&(i.response.data=Ot.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Y=Q,ju=function(t,r){r=r||{};var n={};function i(f,l){return Y.isPlainObject(f)&&Y.isPlainObject(l)?Y.merge(f,l):Y.isPlainObject(l)?Y.merge({},l):Y.isArray(l)?l.slice():l}function a(f){if(Y.isUndefined(r[f])){if(!Y.isUndefined(t[f]))return i(void 0,t[f])}else return i(t[f],r[f])}function s(f){if(!Y.isUndefined(r[f]))return i(void 0,r[f])}function u(f){if(Y.isUndefined(r[f])){if(!Y.isUndefined(t[f]))return i(void 0,t[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(t[f],r[f]);if(f in t)return i(void 0,t[f])}var d={url:s,method:s,data:s,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c};return Y.forEach(Object.keys(t).concat(Object.keys(r)),function(l){var h=d[l]||a,g=h(l);Y.isUndefined(g)&&h!==c||(n[l]=g)}),n},Rt,_o;function Gu(){return _o||(_o=1,Rt={version:"0.26.0"}),Rt}var Xv=Gu().version,_r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){_r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var qo={};_r.transitional=function(t,r,n){function i(a,s){return"[Axios v"+Xv+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,u){if(t===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!qo[s]&&(qo[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,u):!0}};function Wv(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],s=t[a];if(s){var u=e[a],c=u===void 0||s(u,a,e);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var Jv={assertOptions:Wv,validators:_r},Hu=Q,Zv=Ku,Fo=Tv,jo=Vv,lt=ju,$u=Jv,Ne=$u.validators;function $e(e){this.defaults=e,this.interceptors={request:new Fo,response:new Fo}}$e.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=lt(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&$u.assertOptions(n,{silentJSONParsing:Ne.transitional(Ne.boolean),forcedJSONParsing:Ne.transitional(Ne.boolean),clarifyTimeoutError:Ne.transitional(Ne.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var u;if(!a){var c=[jo,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(s),u=Promise.resolve(r);c.length;)u=u.then(c.shift(),c.shift());return u}for(var d=r;i.length;){var f=i.shift(),l=i.shift();try{d=f(d)}catch(h){l(h);break}}try{u=jo(d)}catch(h){return Promise.reject(h)}for(;s.length;)u=u.then(s.shift(),s.shift());return u};$e.prototype.getUri=function(t){return t=lt(this.defaults,t),Zv(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Hu.forEach(["delete","get","head","options"],function(t){$e.prototype[t]=function(r,n){return this.request(lt(n||{},{method:t,url:r,data:(n||{}).data}))}});Hu.forEach(["post","put","patch"],function(t){$e.prototype[t]=function(r,n,i){return this.request(lt(i||{},{method:t,url:r,data:n}))}});var Qv=$e,Bt,Go;function Yv(){if(Go)return Bt;Go=1;var e=ct();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(a){if(!!i._listeners){var s,u=i._listeners.length;for(s=0;s<u;s++)i._listeners[s](a);i._listeners=null}}),this.promise.then=function(a){var s,u=new Promise(function(c){i.subscribe(c),s=c}).then(a);return u.cancel=function(){i.unsubscribe(s)},u},r(function(s){i.reason||(i.reason=new e(s),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(!!this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(s){n=s});return{token:i,cancel:n}},Bt=t,Bt}var Mt,Ho;function eh(){return Ho||(Ho=1,Mt=function(t){return function(n){return t.apply(null,n)}}),Mt}var It,$o;function th(){if($o)return It;$o=1;var e=Q;return It=function(r){return e.isObject(r)&&r.isAxiosError===!0},It}var Vo=Q,rh=Iu,Qe=Qv,nh=ju,ih=dt();function Vu(e){var t=new Qe(e),r=rh(Qe.prototype.request,t);return Vo.extend(r,Qe.prototype,t),Vo.extend(r,t),r.create=function(i){return Vu(nh(e,i))},r}var le=Vu(ih);le.Axios=Qe;le.Cancel=ct();le.CancelToken=Yv();le.isCancel=Fu();le.VERSION=Gu().version;le.all=function(t){return Promise.all(t)};le.spread=eh();le.isAxiosError=th();Dr.exports=le;Dr.exports.default=le;(function(e){e.exports=Dr.exports})(Mu);const Se=Dc(Mu.exports);var he;(function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"})(he||(he={}));var Xo;(function(e){e.CLEANUP_FAILED="Multipart copy clean up failed",e.NO_OBJECT_FOUND="Object does not exist",e.INVALID_QUEUESIZE="Queue size must be a positive number",e.NO_COPYSOURCE="You must specify a copy source",e.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed"})(Xo||(Xo={}));var Fe;(function(e){e.UPLOAD_PAUSED_MESSAGE="paused"})(Fe||(Fe={}));var zt=new Ae("axios-http-handler"),De="sendUploadProgress",it="sendDownloadProgress";function ah(e){return typeof Blob<"u"&&e instanceof Blob}function sh(e){return typeof e<"u"&&Object.prototype.hasOwnProperty.call(e,"response")&&typeof e.response<"u"&&Object.prototype.hasOwnProperty.call(e.response,"status")&&typeof e.response.status=="number"}var Wo=function(e,t){var r,n;try{for(var i=Ue(Object.entries(e)),a=i.next();!a.done;a=i.next()){var s=ke(a.value,2),u=s[0],c=s[1];u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=c,delete e[u])}}catch(d){r={error:d}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},oh=[function(e,t){return ah(e)?(Wo(t,"Content-Type"),Wo(t,"Accept"),e):Se.defaults.transformRequest[0].call(null,e,t)}],uh=function(){function e(t,r,n){t===void 0&&(t={}),this.httpOptions=t,this.emitter=r,this.cancelTokenSource=n}return e.prototype.destroy=function(){},e.prototype.handle=function(t,r){var n=this.httpOptions.requestTimeout,i=r.emitter||this.emitter,a=t.path;if(t.query){var s=ou(t.query);s&&(a+="?"+s)}var u=t.port,c=t.protocol+"//"+t.hostname+(u?":"+u:"")+a,d={};d.url=c,d.method=t.method,d.headers=t.headers,delete d.headers.host,t.body?d.data=t.body:d.headers[Object.keys(d.headers).find(function(l){return l.toLowerCase()==="content-type"})]&&(d.data=null),i&&(d.onUploadProgress=function(l){i.emit(De,l),zt.debug(l)},d.onDownloadProgress=function(l){i.emit(it,l),zt.debug(l)}),this.cancelTokenSource&&(d.cancelToken=this.cancelTokenSource.token),r.cancelTokenSource&&(d.cancelToken=r.cancelTokenSource.token),d.responseType="blob",Uc.isReactNative&&(d.transformRequest=oh);var f=[Se.request(d).then(function(l){return{response:new Ut({headers:l.headers,statusCode:l.status,body:l.data})}}).catch(function(l){var h,g;if(l.message!==Fe.UPLOAD_PAUSED_MESSAGE&&zt.error(l.message),Se.isCancel(l)||!sh(l))throw l;return{response:new Ut({statusCode:l.response.status,body:(h=l.response)===null||h===void 0?void 0:h.data,headers:(g=l.response)===null||g===void 0?void 0:g.headers})}}),ch(n)];return Promise.race(f)},e}();function ch(e){return e===void 0&&(e=0),new Promise(function(t,r){e&&setTimeout(function(){var n=new Error("Request did not complete within "+e+" ms");n.name="TimeoutError",r(n)},e)})}var dh=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Xu="contentLengthMiddleware",lh="http://localhost:20005",ze="__uploadInProgress",fh=function(e){if(typeof e=="string")return e.length;if(gh(e))return e.byteLength;if(hh(e))return e.size;throw new Error("Cannot determine byte length of "+e)},ee=function(e,t,r,n,i){if(e){var a={attrs:r};n&&(a.metrics=n),uu.dispatch("storage",{event:t,data:a,message:i},"Storage",dh)}},vh=function(e){return typeof e<"u"&&e instanceof File},hh=function(e){return typeof e<"u"&&e instanceof Blob},gh=function(e){return typeof e<"u"&&e instanceof ArrayBuffer},Jo=new Ae("S3ClientUtils"),Zo={accessKeyId:"",secretAccessKey:""},Wu=function(e){var t=e.credentials,r=e.level,n=e.customPrefix,i=e.identityId,a=n||{},s=i||t.identityId,u=(a.private!==void 0?a.private:"private/")+s+"/",c=(a.protected!==void 0?a.protected:"protected/")+s+"/",d=a.public!==void 0?a.public:"public/";switch(r){case"private":return u;case"protected":return c;default:return d}},Ju=function(e,t){return function(r,n){return function(i){return L(void 0,void 0,void 0,function(){var a,s,u,c,d;return x(this,function(f){switch(f.label){case 0:return[4,ye.get()];case 1:return a=f.sent(),s=ye.shear(a),u=Wu(w(w({},e),{credentials:s})),c=Object.assign({},i.input),Object.prototype.hasOwnProperty.call(i.input,"Key")?(c.Key=u+t,i.input=c):Object.prototype.hasOwnProperty.call(i.input,"Prefix")&&(c.Prefix=u+t,i.input=c),d=r(i),[2,d]}})})}}},mh=function(e){return e.ServerTime&&typeof e.Code=="string"&&e.Code==="RequestTimeTooSkewed"},Zu=function(e){return function(t,r){return function(n){return L(void 0,void 0,void 0,function(){var i,a;return x(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t(n)];case 1:return[2,s.sent()];case 2:throw i=s.sent(),mh(i)&&(a=new Date(i.ServerTime),e.systemClockOffset=a.getTime()-Date.now()),i;case 3:return[2]}})})}}},Qu={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},Yu={step:"initialize",name:"addPrefixMiddleware"},ph=function(){return L(void 0,void 0,void 0,function(){var e,t,r;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ye.get()];case 1:return e=n.sent(),e?(t=ye.shear(e),Jo.debug("credentials provider get credentials",t),[2,t]):[2,Zo];case 2:return r=n.sent(),Jo.warn("credentials provider error",r),[2,Zo];case 3:return[2]}})})},ec=function(e,t){var r=e.region,n=e.cancelTokenSource,i=e.dangerouslyConnectToHttpEndpointForTesting,a=e.useAccelerateEndpoint,s={};i&&(s={endpoint:lh,tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var u=new Il(w(w({region:r,credentials:ph,customUserAgent:Kc()},s),{requestHandler:new uh({},t,n),useAccelerateEndpoint:a}));return u.middlewareStack.remove(Xu),u},je={exports:{}},Re=typeof Reflect=="object"?Reflect:null,Qo=Re&&typeof Re.apply=="function"?Re.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Ye;Re&&typeof Re.ownKeys=="function"?Ye=Re.ownKeys:Object.getOwnPropertySymbols?Ye=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ye=function(t){return Object.getOwnPropertyNames(t)};function yh(e){console&&console.warn&&console.warn(e)}var tc=Number.isNaN||function(t){return t!==t};function B(){B.init.call(this)}je.exports=B;je.exports.once=Eh;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var Yo=10;function ft(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return Yo},set:function(e){if(typeof e!="number"||e<0||tc(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Yo=e}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||tc(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function rc(e){return e._maxListeners===void 0?B.defaultMaxListeners:e._maxListeners}B.prototype.getMaxListeners=function(){return rc(this)};B.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var c=a[t];if(c===void 0)return!1;if(typeof c=="function")Qo(c,this,r);else for(var d=c.length,f=oc(c,d),n=0;n<d;++n)Qo(f[n],this,r);return!0};function nc(e,t,r,n){var i,a,s;if(ft(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),s===void 0)s=a[t]=r,++e._eventsCount;else if(typeof s=="function"?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=rc(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,yh(u)}return e}B.prototype.addListener=function(t,r){return nc(this,t,r,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(t,r){return nc(this,t,r,!0)};function Sh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ic(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=Sh.bind(n);return i.listener=r,n.wrapFn=i,i}B.prototype.once=function(t,r){return ft(r),this.on(t,ic(this,t,r)),this};B.prototype.prependOnceListener=function(t,r){return ft(r),this.prependListener(t,ic(this,t,r)),this};B.prototype.removeListener=function(t,r){var n,i,a,s,u;if(ft(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){u=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():Ch(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||r)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function ac(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?bh(i):oc(i,i.length)}B.prototype.listeners=function(t){return ac(this,t,!0)};B.prototype.rawListeners=function(t){return ac(this,t,!1)};B.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):sc.call(e,t)};B.prototype.listenerCount=sc;function sc(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?Ye(this._events):[]};function oc(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Ch(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function bh(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Eh(e,t){return new Promise(function(r,n){function i(s){e.removeListener(t,a),n(s)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}uc(e,t,a,{once:!0}),t!=="error"&&wh(e,i,{once:!0})})}function wh(e,t,r){typeof e.on=="function"&&uc(e,"error",t,r)}function uc(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Oe=new Ae("AWSS3ProviderManagedUpload"),xh=function(){function e(t,r,n){this.minPartSize=5*1024*1024,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.uploadId=null,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=t,this.opts=r,this.emitter=n,this.s3client=this._createNewS3Client(r,n)}return e.prototype.upload=function(){return L(this,void 0,void 0,function(){var t,r,n,i,a,s,u,c=this;return x(this,function(d){switch(d.label){case 0:return d.trys.push([0,10,,12]),t=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return t.body=d.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,r=new cv(this.params),[2,this.s3client.send(r)]):[3,2];case 2:return n=this,[4,this.createMultiPartUpload()];case 3:n.uploadId=d.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),a=this.createParts(),s=0,d.label=4;case 4:return s<i?[4,this.uploadParts(this.uploadId,a.slice(s,s+this.queueSize))]:[3,7];case 5:d.sent(),d.label=6;case 6:return s+=this.queueSize,[3,4];case 7:return a.map(function(f){c.removeEventListener(f)}),[4,this.finishMultiPartUpload(this.uploadId)];case 8:return[2,d.sent()];case 9:return[3,12];case 10:return u=d.sent(),[4,this.cleanup(this.uploadId)];case 11:throw d.sent(),Oe.error("Error. Cancelling the multipart upload."),u;case 12:return[2]}})})},e.prototype.createParts=function(){try{for(var t=[],r=0;r<this.totalBytesToUpload;){var n=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,n),partNumber:t.length+1,emitter:new je.exports.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t}catch(i){throw Oe.error(i),i}},e.prototype.createMultiPartUpload=function(){return L(this,void 0,void 0,function(){var t,r,n;return x(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=new Ou(this.params),[4,this.s3client.send(t)];case 1:return r=i.sent(),Oe.debug(r.UploadId),[2,r.UploadId];case 2:throw n=i.sent(),Oe.error(n),n;case 3:return[2]}})})},e.prototype.uploadParts=function(t,r){return L(this,void 0,void 0,function(){var n,i,a,s=this;return x(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Promise.all(r.map(function(c){return L(s,void 0,void 0,function(){var d,f,l,h,g,v,p,S;return x(this,function(y){switch(y.label){case 0:return this.setupEventListener(c),d={emitter:c.emitter},f=this.params,l=f.Key,h=f.Bucket,g=f.SSECustomerAlgorithm,v=f.SSECustomerKey,p=f.SSECustomerKeyMD5,[4,this.s3client.send(new Bu(w(w(w({PartNumber:c.partNumber,Body:c.bodyPart,UploadId:t,Key:l,Bucket:h},g&&{SSECustomerAlgorithm:g}),v&&{SSECustomerKey:v}),p&&{SSECustomerKeyMD5:p})),d)];case 1:return S=y.sent(),[2,S]}})})}))];case 1:for(n=u.sent(),i=0;i<n.length;i++)this.completedParts.push({PartNumber:r[i].partNumber,ETag:n[i].ETag});return[3,3];case 2:throw a=u.sent(),Oe.error("Error happened while uploading a part. Cancelling the multipart upload"),a;case 3:return[2]}})})},e.prototype.finishMultiPartUpload=function(t){return L(this,void 0,void 0,function(){var r,n,i,a;return x(this,function(s){switch(s.label){case 0:r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t,MultipartUpload:{Parts:this.completedParts}},n=new Nu(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.s3client.send(n)];case 2:return i=s.sent(),[2,i.Key];case 3:throw a=s.sent(),Oe.error("Error happened while finishing the upload."),a;case 4:return[2]}})})},e.prototype.cleanup=function(t){return L(this,void 0,void 0,function(){var r,n;return x(this,function(i){switch(i.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t},[4,this.s3client.send(new Pu(r))];case 1:return i.sent(),[4,this.s3client.send(new Ru(r))];case 2:if(n=i.sent(),n&&n.Parts&&n.Parts.length>0)throw new Error("Multipart upload clean up failed.");return[2]}})})},e.prototype.removeEventListener=function(t){t.emitter.removeAllListeners(De),t.emitter.removeAllListeners(it)},e.prototype.setupEventListener=function(t){var r=this;t.emitter.on(De,function(n){r.progressChanged(t.partNumber,n.loaded-t._lastUploadedBytes),t._lastUploadedBytes=n.loaded})},e.prototype.progressChanged=function(t,r){this.bytesUploaded+=r,this.emitter.emit(De,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:t,key:this.params.Key})},e.prototype.byteLength=function(t){if(t==null)return 0;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size;if(typeof t.path!="string")throw new Error("Cannot determine length of "+t)},e.prototype.validateAndSanitizeBody=function(t){return L(this,void 0,void 0,function(){return x(this,function(r){return this.isGenericObject(t)?[2,JSON.stringify(t)]:[2,t]})})},e.prototype.isGenericObject=function(t){if(t!==null&&typeof t=="object")try{return!(this.byteLength(t)>=0)}catch{return!0}return!1},e.prototype._createNewS3Client=function(t,r){var n=ec(t,r);return n.middlewareStack.add(Ju(this.opts,this.params.Key),Yu),n.middlewareStack.add(Zu(n.config),Qu),n},e}(),J=new Ae("AWSS3UploadTask"),D;(function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"})(D||(D={}));var ne;(function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"})(ne||(ne={}));var eu=1e4,kh=5*1024*1024,Lh=4;function Ah(e,t){return e.PartNumber-t.PartNumber}var cc=function(){function e(t){var r=t.s3Client,n=t.file,i=t.emitter,a=t.storage,s=t.params,u=t.level,c=t.prefixPromise;this.partSize=kh,this.queueSize=Lh,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=D.INIT,this.prefixPromise=c,this.s3client=r,this.s3client.middlewareStack.remove(Xu),this.storage=a,this.storageSync=Promise.resolve(),typeof this.storage.sync=="function"&&(this.storageSync=this.storage.sync()),this.params=s,this.file=n,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=i,this.queued=[],this.fileId=this._getFileId(u),this._validateParams(),this.emitter.on(ne.ERROR,function(){})}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===D.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(t){var r=t.key,n=t.bucket;return L(this,void 0,void 0,function(){var i,a,s,u,c;return x(this,function(d){switch(d.label){case 0:return[4,this.s3client.send(new Tu({Bucket:n,Prefix:r}))];case 1:return i=d.sent(),a=i.Contents,s=a===void 0?[]:a,[4,this.prefixPromise];case 2:return u=d.sent(),c=s.find(function(f){return f.Key===""+u+r}),[2,c]}})})},e.prototype._getFileId=function(t){return vh(this.file)?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,t,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,t,this.params.Key].join("-")},e.prototype._findCachedUploadParts=function(){return L(this,void 0,void 0,function(){var t,r,n;return x(this,function(i){switch(i.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return t=i.sent(),Object.keys(t).length===0||!Object.prototype.hasOwnProperty.call(t,this.fileId)?[2,{parts:[],uploadId:null}]:(r=t[this.fileId],r.lastTouched=Date.now(),this.storage.setItem(ze,JSON.stringify(t)),[4,this.s3client.send(new Ru({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r.uploadId}))]);case 2:return n=i.sent(),[2,{parts:n.Parts||[],uploadId:r.uploadId}]}})})},e.prototype._emitEvent=function(t,r){this.emitter.emit(t,r)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>eu)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is "+eu+".")},e.prototype._listCachedUploadTasks=function(){return L(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return[4,this.storageSync];case 1:return r.sent(),t=this.storage.getItem(ze)||"{}",[2,JSON.parse(t)]}})})},e.prototype._cache=function(t){return L(this,void 0,void 0,function(){var r;return x(this,function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return r=n.sent(),r[this.fileId]=t,this.storage.setItem(ze,JSON.stringify(r)),[2]}})})},e.prototype._isCached=function(){return L(this,void 0,void 0,function(){var t,r;return x(this,function(n){switch(n.label){case 0:return r=(t=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,r.apply(t,[n.sent(),this.fileId])]}})})},e.prototype._removeFromCache=function(){return L(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return t=r.sent(),delete t[this.fileId],this.storage.setItem(ze,JSON.stringify(t)),[2]}})})},e.prototype._onPartUploadCompletion=function(t){var r=t.eTag,n=t.partNumber,i=t.chunk;return L(this,void 0,void 0,function(){return x(this,function(a){return this.completedParts.push({ETag:r,PartNumber:n}),this.bytesUploaded+=fh(i),this._emitEvent(ne.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter(function(s){return s.uploadPartInput.PartNumber!==n}),this.queued.length&&this.state!==D.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]})})},e.prototype._completeUpload=function(){return L(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.s3client.send(new Nu({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(Ah)}}))];case 1:return r.sent(),this._verifyFileSize(),this._emitEvent(ne.UPLOAD_COMPLETE,{key:this.params.Key}),this._removeFromCache(),this.state=D.COMPLETED,[3,3];case 2:return t=r.sent(),J.error("error completing upload",t),this._emitEvent(ne.ERROR,t),[3,3];case 3:return[2]}})})},e.prototype._makeUploadPartRequest=function(t,r){return L(this,void 0,void 0,function(){var n,i;return x(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.s3client.send(new Bu(t),{cancelTokenSource:r})];case 1:return n=a.sent(),[4,this._onPartUploadCompletion({eTag:n.ETag,partNumber:t.PartNumber,chunk:t.Body})];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),this.state===D.PAUSED?J.log("upload paused"):this.state===D.CANCELLED?J.log("upload aborted"):J.error("error starting next part of upload: ",i),!Se.isCancel(i)&&i.message!==Fe.UPLOAD_PAUSED_MESSAGE&&(this._emitEvent(ne.ERROR,i),this.pause()),[3,4];case 4:return[2]}})})},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==D.PAUSED){var t=Se.CancelToken.source(),r=this.queued.shift();this.inProgress.push({uploadPartInput:r,s3Request:this._makeUploadPartRequest(r,t),cancel:t.cancel})}},e.prototype._verifyFileSize=function(){return L(this,void 0,void 0,function(){var t,r;return x(this,function(n){switch(n.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(t=n.sent(),r=Boolean(t&&t.Size===this.file.size),!r)throw new Error("File size does not match between local file and file on s3");return[2,r]}})})},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var t=this.file.size,r=[],n=0;n<t;){var i=Math.min(n+this.partSize,t);r.push({Body:this.file.slice(n,i),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:r.length+1,UploadId:this.uploadId}),n+=this.partSize}return r},e.prototype._initCachedUploadParts=function(t){this.bytesUploaded+=t.reduce(function(n,i){return n+i.Size},0);var r=new Set(t.map(function(n){return n.PartNumber}));this.queued=this.queued.filter(function(n){return!r.has(n.PartNumber)}),this.completedParts=t.map(function(n){return{PartNumber:n.PartNumber,ETag:n.ETag}}),this._emitEvent(ne.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return L(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return[4,this.s3client.send(new Ou(this.params))];case 1:return t=r.sent(),this._cache({uploadId:t.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,t.UploadId]}})})},e.prototype._initializeUploadTask=function(){return L(this,void 0,void 0,function(){var t,r,n,n,i;return x(this,function(a){switch(a.label){case 0:this.state=D.IN_PROGRESS,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,this._isCached()];case 2:return a.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return t=a.sent(),r=t.parts,n=t.uploadId,this.uploadId=n,this.queued=this._createParts(),this._initCachedUploadParts(r),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:n=a.sent(),this.uploadId=n,this.queued=this._createParts(),this._startUpload(),a.label=6;case 6:return[3,8];case 7:return i=a.sent(),Se.isCancel(i)||J.error("Error initializing the upload task",i),[3,8];case 8:return[2]}})})},e.prototype.resume=function(){this.state===D.CANCELLED?J.warn("This task has already been cancelled"):this.state===D.COMPLETED?J.warn("This task has already been completed"):this.state===D.IN_PROGRESS?J.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=D.IN_PROGRESS;for(var t=0;t<this.queueSize;t++)this._startNextPart()},e.prototype._cancel=function(){return L(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return this.state!==D.CANCELLED?[3,1]:(J.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==D.COMPLETED?[3,2]:(J.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=D.CANCELLED,r.label=3;case 3:return r.trys.push([3,6,,7]),[4,this.s3client.send(new Pu({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return r.sent(),[4,this._removeFromCache()];case 5:return r.sent(),[2,!0];case 6:return t=r.sent(),J.error("Error cancelling upload task",t),[2,!1];case 7:return[2]}})})},e.prototype.pause=function(){var t;this.state===D.CANCELLED?J.warn("This task has already been cancelled"):this.state===D.COMPLETED?J.warn("This task has already been completed"):this.state===D.PAUSED&&J.warn("This task is already paused"),this.state=D.PAUSED;var r=this.inProgress.splice(0,this.inProgress.length);r.forEach(function(n){n.cancel(Fe.UPLOAD_PAUSED_MESSAGE)}),(t=this.queued).unshift.apply(t,Kt(r.map(function(n){return n.uploadPartInput})))},e}(),z=new Ae("AWSS3Provider"),tu="public",Ph=900,Nh=function(){function e(t){var r=this;this._config=t||{},this._storage=new _c().getStorage(),uu.listen("auth",function(n){var i=n.payload;(i.event==="signOut"||i.event==="signIn")&&r._storage.removeItem(ze)}),z.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(t){if(z.debug("configure Storage",t),!t)return this._config;var r=cu(t);return this._config=Object.assign({},this._config,r.Storage),this._config.bucket||z.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(t,r){var n=t.s3Client,i=t.emitter,a=t.key,s=t.file,u=t.params,c=r.progressCallback,d=r.completeCallback,f=r.errorCallback,l=r.track,h=l===void 0?!1:l;if(!(s instanceof Blob))throw new Error(he.INVALID_BLOB);i.on(ne.UPLOAD_PROGRESS,function(p){c&&(typeof c=="function"?c(p):z.warn("progressCallback should be a function, not a "+typeof c))}),i.on(ne.UPLOAD_COMPLETE,function(p){d&&(typeof d=="function"?d(p):z.warn("completeCallback should be a function, not a "+typeof d))}),i.on(ne.ERROR,function(p){f&&(typeof f=="function"?f(p):z.warn("errorCallback should be a function, not a "+typeof f))});var g=ye.get().then(function(p){var S=ye.shear(p);return Wu(w(w({},r),{credentials:S}))}),v=new cc({s3Client:n,file:s,emitter:i,level:r.level,storage:this._storage,params:u,prefixPromise:g});return ee(h,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+a),v.resume(),v},e.prototype.copy=function(t,r,n){return L(this,void 0,void 0,function(){var i,a,s,u,c,d,f,l,h,g,v,p,S,y,b,E,C,k,A,re,R,_,I,M,U,j;return x(this,function(G){switch(G.label){case 0:return[4,this._ensureCredentials()];case 1:if(i=G.sent(),!i||!this._isWithCredentials(this._config))throw new Error(he.NO_CREDENTIALS);if(a=Object.assign({},this._config,n),s=a.acl,u=a.bucket,c=a.cacheControl,d=a.expires,f=a.track,l=a.serverSideEncryption,h=a.SSECustomerAlgorithm,g=a.SSECustomerKey,v=a.SSECustomerKeyMD5,p=a.SSEKMSKeyId,S=t.level,y=S===void 0?tu:S,b=t.identityId,E=t.key,C=r.level,k=C===void 0?tu:C,A=r.key,!E||typeof E!="string")throw new Error(he.NO_SRC_KEY);if(!A||typeof A!="string")throw new Error(he.NO_DEST_KEY);y!=="protected"&&b&&z.warn(`You may copy files from another user if the source level is "protected", currently it's `+y),re=this._prefix(w(w(w({},a),{level:y}),b&&{identityId:b})),R=this._prefix(w(w({},a),{level:k})),_=u+"/"+re+E,I=""+R+A,z.debug("copying "+_+" to "+I),M={Bucket:u,CopySource:_,Key:I,MetadataDirective:"COPY"},c&&(M.CacheControl=c),d&&(M.Expires=d),l&&(M.ServerSideEncryption=l),h&&(M.SSECustomerAlgorithm=h),g&&(M.SSECustomerKey=g),v&&(M.SSECustomerKeyMD5=v),p&&(M.SSEKMSKeyId=p),s&&(M.ACL=s),U=this._createNewS3Client(a),G.label=2;case 2:return G.trys.push([2,4,,5]),[4,U.send(new ov(M))];case 3:return G.sent(),ee(f,"copy",{method:"copy",result:"success"},null,"Copy success from "+E+" to "+A),[2,{key:A}];case 4:throw j=G.sent(),ee(f,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+E+" to "+A),j;case 5:return[2]}})})},e.prototype.get=function(t,r){return L(this,void 0,void 0,function(){var n,i,a,s,u,c,d,f,l,h,g,v,p,S,y,b,E,C,k,A,re,R,_,I,M,U,j,G;return x(this,function(ae){switch(ae.label){case 0:return[4,this._ensureCredentials()];case 1:if(n=ae.sent(),!n||!this._isWithCredentials(this._config))throw new Error(he.NO_CREDENTIALS);if(i=Object.assign({},this._config,r),a=i.bucket,s=i.download,u=i.cacheControl,c=i.contentDisposition,d=i.contentEncoding,f=i.contentLanguage,l=i.contentType,h=i.expires,g=i.track,v=i.SSECustomerAlgorithm,p=i.SSECustomerKey,S=i.SSECustomerKeyMD5,y=i.progressCallback,b=this._prefix(i),E=b+t,C=new je.exports.EventEmitter,k=this._createNewS3Client(i,C),z.debug("get "+t+" from "+E),A={Bucket:a,Key:E},u&&(A.ResponseCacheControl=u),c&&(A.ResponseContentDisposition=c),d&&(A.ResponseContentEncoding=d),f&&(A.ResponseContentLanguage=f),l&&(A.ResponseContentType=l),v&&(A.SSECustomerAlgorithm=v),p&&(A.SSECustomerKey=p),S&&(A.SSECustomerKeyMD5=S),s!==!0)return[3,5];re=new Ys(A),ae.label=2;case 2:return ae.trys.push([2,4,,5]),y&&(typeof y=="function"?C.on(it,function(dc){y(dc)}):z.warn("progressCallback should be a function, not a "+typeof y)),[4,k.send(re)];case 3:return R=ae.sent(),C.removeAllListeners(it),ee(g,"download",{method:"get",result:"success"},{fileSize:Number(R.Body.size||R.Body.length)},"Download success for "+t),[2,R];case 4:throw _=ae.sent(),ee(g,"download",{method:"get",result:"failed"},null,"Download failed with "+_.message),_;case 5:return ae.trys.push([5,8,,9]),I=new hv(w({},k.config)),[4,lv(k,new Ys(A))];case 6:return M=ae.sent(),j=dv,[4,I.presign(M,{expiresIn:h||Ph})];case 7:return U=j.apply(void 0,[ae.sent()]),ee(g,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+U),[2,U];case 8:throw G=ae.sent(),z.warn("get signed url error",G),ee(g,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+t),G;case 9:return[2]}})})},e.prototype.put=function(t,r,n){var i=Object.assign({},this._config,n),a=i.bucket,s=i.track,u=i.progressCallback,c=i.level,d=i.resumable,f=i.contentType,l=i.contentDisposition,h=i.contentEncoding,g=i.cacheControl,v=i.expires,p=i.metadata,S=i.tagging,y=i.acl,b=i.serverSideEncryption,E=i.SSECustomerAlgorithm,C=i.SSECustomerKey,k=i.SSECustomerKeyMD5,A=i.SSEKMSKeyId,re=f||"binary/octet-stream",R={Bucket:a,Key:t,Body:r,ContentType:re};g&&(R.CacheControl=g),l&&(R.ContentDisposition=l),h&&(R.ContentEncoding=h),v&&(R.Expires=v),p&&(R.Metadata=p),S&&(R.Tagging=S),b&&(R.ServerSideEncryption=b),E&&(R.SSECustomerAlgorithm=E),C&&(R.SSECustomerKey=C),k&&(R.SSECustomerKeyMD5=k),A&&(R.SSEKMSKeyId=A);var _=new je.exports.EventEmitter,I=new xh(R,i,_);if(y&&(R.ACL=y),d===!0){var M=this._createNewS3Client(i);M.middlewareStack.add(Ju(i,t),Yu);var U={bucket:a,key:t,s3Client:M,file:r,emitter:_,accessLevel:c,params:R};return this.startResumableUpload(U,n)}try{return u&&(typeof u=="function"?_.on(De,function(j){u(j)}):z.warn("progressCallback should be a function, not a "+typeof u)),I.upload().then(function(j){return z.debug("upload result",j),ee(s,"upload",{method:"put",result:"success"},null,"Upload success for "+t),{key:t}})}catch(j){throw z.warn("error uploading",j),ee(s,"upload",{method:"put",result:"failed"},null,"Error uploading "+t),j}},e.prototype.remove=function(t,r){return L(this,void 0,void 0,function(){var n,i,a,s,u,c,d,f,l,h,g;return x(this,function(v){switch(v.label){case 0:return[4,this._ensureCredentials()];case 1:if(n=v.sent(),!n||!this._isWithCredentials(this._config))throw new Error(he.NO_CREDENTIALS);i=Object.assign({},this._config,r),a=i.bucket,s=i.track,u=this._prefix(i),c=u+t,d=this._createNewS3Client(i),z.debug("remove "+t+" from "+c),f={Bucket:a,Key:c},l=new uv(f),v.label=2;case 2:return v.trys.push([2,4,,5]),[4,d.send(l)];case 3:return h=v.sent(),ee(s,"delete",{method:"remove",result:"success"},null,"Deleted "+t+" successfully"),[2,h];case 4:throw g=v.sent(),ee(s,"delete",{method:"remove",result:"failed"},null,"Deletion of "+t+" failed with "+g),g;case 5:return[2]}})})},e.prototype._list=function(t,r,n){return L(this,void 0,void 0,function(){var i,a,s,u;return x(this,function(c){switch(c.label){case 0:return i={results:[],hasNextToken:!1},a=this._createNewS3Client(r),s=new Tu(w({},t)),[4,a.send(s)];case 1:return u=c.sent(),u&&u.Contents&&(i.results=u.Contents.map(function(d){return{key:d.Key.substr(n.length),eTag:d.ETag,lastModified:d.LastModified,size:d.Size}}),i.nextToken=u.NextContinuationToken,i.hasNextToken=u.IsTruncated),[2,i]}})})},e.prototype.list=function(t,r){var n;return L(this,void 0,void 0,function(){var i,a,s,u,c,d,f,l,h,g,v,p,S,y,b;return x(this,function(E){switch(E.label){case 0:return[4,this._ensureCredentials()];case 1:if(i=E.sent(),!i||!this._isWithCredentials(this._config))throw new Error(he.NO_CREDENTIALS);a=Object.assign({},this._config,r),s=a.bucket,u=a.track,c=a.pageSize,d=a.nextToken,f=this._prefix(a),l=f+t,z.debug("list "+t+" from "+l),E.label=2;case 2:if(E.trys.push([2,10,,11]),h={results:[],hasNextToken:!1},g=1e3,v=void 0,p={Bucket:s,Prefix:l,MaxKeys:g,ContinuationToken:d},p.ContinuationToken=d,c!=="ALL")return[3,7];E.label=3;case 3:return[4,this._list(p,a,f)];case 4:v=E.sent(),(y=h.results).push.apply(y,Kt(v.results)),v.nextToken&&(p.ContinuationToken=v.nextToken),E.label=5;case 5:if(v.nextToken)return[3,3];E.label=6;case 6:return[3,9];case 7:return c&&c<=g&&typeof c=="number"?p.MaxKeys=c:z.warn("pageSize should be from 0 - "+g+"."),[4,this._list(p,a,f)];case 8:v=E.sent(),(b=h.results).push.apply(b,Kt(v.results)),h.hasNextToken=v.hasNextToken,h.nextToken=(n=null)!=null&&n!==void 0?n:v.nextToken,E.label=9;case 9:return ee(u,"list",{method:"list",result:"success"},null,h.results.length+" items returned from list operation"),z.debug("list",h),[2,h];case 10:throw S=E.sent(),z.error("list InvalidArgument",S),ee(u,"list",{method:"list",result:"failed"},null,"Listing items failed: "+S.message),S;case 11:return[2]}})})},e.prototype._ensureCredentials=function(){return L(this,void 0,void 0,function(){var t,r,n;return x(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ye.get()];case 1:return t=i.sent(),t?(r=ye.shear(t),z.debug("set credentials for storage",r),this._config.credentials=r,[2,!0]):[2,!1];case 2:return n=i.sent(),z.warn("ensure credentials error",n),[2,!1];case 3:return[2]}})})},e.prototype._isWithCredentials=function(t){return typeof t=="object"&&t.hasOwnProperty("credentials")},e.prototype._prefix=function(t){var r=t.credentials,n=t.level,i=t.customPrefix||{},a=t.identityId||r.identityId,s=(i.private!==void 0?i.private:"private/")+a+"/",u=(i.protected!==void 0?i.protected:"protected/")+a+"/",c=i.public!==void 0?i.public:"public/";switch(n){case"private":return s;case"protected":return u;default:return c}},e.prototype._createNewS3Client=function(t,r){var n=ec(t,r);return n.middlewareStack.add(Zu(n.config),Qu),n},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),fe=new Ae("StorageClass"),Dt=new Ae("Storage"),me="AWSS3",ru=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,fe.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(t){if(t&&t.getCategory()==="Storage"){this._pluggables.push(t);var r={};return r=t.configure(this._config[t.getProviderName()]),r}},e.prototype.getPluggable=function(t){var r=this._pluggables.find(function(n){return n.getProviderName()===t});return r===void 0?(fe.debug("No plugin found with providerName",t),null):r},e.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(r){return r.getProviderName()!==t})},e.prototype.configure=function(t){var r=this,n;if(fe.debug("configure Storage"),!t)return this._config;var i=cu(t),a=(n=i.Storage)!==null&&n!==void 0?n:{},s=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],u=function(c){return Object.keys(c).find(function(d){return s.includes(d)})};return u(a)&&!a[me]&&(a[me]={}),Object.entries(a).forEach(function(c){var d=ke(c,2),f=d[0],l=d[1];f&&s.includes(f)&&l!==void 0&&(a[me][f]=l,delete a[f])}),Object.keys(a).forEach(function(c){typeof a[c]!="string"&&(r._config[c]=w(w({},r._config[c]),a[c]))}),this._pluggables.forEach(function(c){c.configure(r._config[c.getProviderName()])}),this._pluggables.length===0&&this.addPluggable(new Nh),this._config},e.prototype.getCancellableTokenSource=function(){return Se.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(t,r){this._cancelTokenSourceMap.set(t,r)},e.prototype.isUploadTask=function(t){return typeof t<"u"&&typeof t.pause=="function"&&typeof t.resume=="function"},e.prototype.cancel=function(t,r){if(t instanceof cc)return t._cancel();var n=this._cancelTokenSourceMap.get(t);n?n.cancel(r):fe.debug("The request does not map to any cancel token")},e.prototype.copy=function(t,r,n){var i=(n==null?void 0:n.provider)||me,a=this._pluggables.find(function(c){return c.getProviderName()===i});if(a===void 0)return fe.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var s=this.getCancellableTokenSource();if(typeof a.copy!="function")return Promise.reject(".copy is not implemented on provider "+a.getProviderName());var u=a.copy(t,r,w(w({},n),{cancelTokenSource:s}));return this.updateRequestToBeCancellable(u,s),u},e.prototype.get=function(t,r){var n=(r==null?void 0:r.provider)||me,i=this._pluggables.find(function(u){return u.getProviderName()===n});if(i===void 0)return fe.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource(),s=i.get(t,w(w({},r),{cancelTokenSource:a}));return this.updateRequestToBeCancellable(s,a),s},e.prototype.isCancelError=function(t){return Se.isCancel(t)},e.prototype.put=function(t,r,n){var i=(n==null?void 0:n.provider)||me,a=this._pluggables.find(function(c){return c.getProviderName()===i});if(a===void 0)return fe.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var s=this.getCancellableTokenSource(),u=a.put(t,r,w(w({},n),{cancelTokenSource:s}));return this.isUploadTask(u)||this.updateRequestToBeCancellable(u,s),u},e.prototype.remove=function(t,r){var n=(r==null?void 0:r.provider)||me,i=this._pluggables.find(function(a){return a.getProviderName()===n});return i===void 0?(fe.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):i.remove(t,r)},e.prototype.list=function(t,r){var n=(r==null?void 0:r.provider)||me,i=this._pluggables.find(function(a){return a.getProviderName()===n});return i===void 0?(fe.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):i.list(t,r)},e}(),ve=null,Oh=function(){if(ve)return ve;Dt.debug("Create Storage Instance, debug"),ve=new ru,ve.vault=new ru;var e=ve.configure;return ve.configure=function(t){Dt.debug("storage configure called");var r=w({},e.call(ve,t));Object.keys(r).forEach(function(n){typeof r[n]!="string"&&(r[n]=w(w({},r[n]),{level:"private"}))}),Dt.debug("storage vault configure called"),ve.vault.configure(r)},ve},Th=Oh();qc.register(Th);export{Th as S};
